'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _express = require('express');

var _express2 = _interopRequireDefault(_express);

var _cors = require('cors');

var _cors2 = _interopRequireDefault(_cors);

var _path = require('path');

var _path2 = _interopRequireDefault(_path);

var _bodyParser = require('body-parser');

var _bodyParser2 = _interopRequireDefault(_bodyParser);

var _officeCtr = require('./controllers/officeCtr');

var _officeCtr2 = _interopRequireDefault(_officeCtr);

var _userCtr = require('./controllers/userCtr');

var _userCtr2 = _interopRequireDefault(_userCtr);

var _partyCtr = require('./controllers/partyCtr');

var _partyCtr2 = _interopRequireDefault(_partyCtr);

var _candidatesCtr = require('./controllers/candidatesCtr');

var _candidatesCtr2 = _interopRequireDefault(_candidatesCtr);

var _votesCtr = require('./controllers/votesCtr');

var _votesCtr2 = _interopRequireDefault(_votesCtr);

var _tokenAuth = require('./helper/tokenAuth');

var _tokenAuth2 = _interopRequireDefault(_tokenAuth);

var _verifyAdmin = require('./helper/verifyAdmin');

var _verifyAdmin2 = _interopRequireDefault(_verifyAdmin);

var _userAuth = require('./helper/userAuth');

var _userAuth2 = _interopRequireDefault(_userAuth);

var _allowCors = require('./helper/allowCors');

var _allowCors2 = _interopRequireDefault(_allowCors);

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : { default: obj };
}

var app = (0, _express2.default)(); // import { json, urlencoded } from 'body-parser';


app.use((0, _cors2.default)());

app.use('*', function (req, res, next) {
  res.header('Access-Control-Allow-Origin', '*');
  res.header('Access-Control-Allow-Methods', 'PUT, GET, POST, DELETE, OPTIONS');
  res.header('Access-Control-Allow-Headers', 'Content-Type');
  next();
});

app.use(_express2.default.static(_path2.default.join(__dirname)));
app.use('/styles', _express2.default.static(__dirname + '../../UI/styles'));
app.use('/images', _express2.default.static(__dirname + '../../UI/images'));
app.use('/scripts', _express2.default.static(__dirname + '../../UI/scripts'));
app.use('/views', _express2.default.static(__dirname + '../../UI/views'));

app.use(_bodyParser2.default.json());
app.use(_bodyParser2.default.urlencoded({
  extended: true
}));

app.use(_express2.default.json());
var port = process.env.PORT || 3000;

// homepage
app.get('/', function (req, res) {
  res.sendFile(_path2.default.join(__dirname + '../../UI/views/index.html'));
});

app.get('/api/v1', function (req, res) {
  return res.status(200).send({
    status: 200,
    message: 'Welcome to POLITICO'
  });
});
// admin: create, edit
app.post('/api/v1/parties', _tokenAuth2.default.verifyToken, _verifyAdmin2.default.verifyIsAdmin, _partyCtr2.default.create);

app.patch('/api/v1/parties/:id/name', _tokenAuth2.default.verifyToken, _verifyAdmin2.default.verifyIsAdmin, _partyCtr2.default.update);

app.delete('/api/v1/parties/:id', _tokenAuth2.default.verifyToken, _verifyAdmin2.default.verifyIsAdmin, _partyCtr2.default.delete);

app.post('/api/v1/offices', _tokenAuth2.default.verifyToken, _verifyAdmin2.default.verifyIsAdmin, _officeCtr2.default.create);

app.post('/api/v1/office/:userid/register', _tokenAuth2.default.verifyToken, _verifyAdmin2.default.verifyIsAdmin, _userAuth2.default.validateUserId, _candidatesCtr2.default.register);

app.get('/api/v1/users', _tokenAuth2.default.verifyToken, _verifyAdmin2.default.verifyIsAdmin, _userAuth2.default.validateUserId, _userCtr2.default.getAllUsers);

// user
app.get('/api/v1/parties', _tokenAuth2.default.verifyToken, _partyCtr2.default.getParties);

app.get('/api/v1/parties/:id', _tokenAuth2.default.verifyToken, _partyCtr2.default.getAParty);

app.get('/api/v1/offices', _allowCors2.default.allowCors, _tokenAuth2.default.verifyToken, _officeCtr2.default.getAllOffices);

app.get('/api/v1/offices/:id', _tokenAuth2.default.verifyToken, _officeCtr2.default.getOneOffice);

app.post('/api/v1/votes', _tokenAuth2.default.verifyToken, _votesCtr2.default.votes);

app.get('/api/v1/office/:officeid/result', _tokenAuth2.default.verifyToken, _officeCtr2.default.officeResult);

app.get('/api/v1/candidates', _allowCors2.default.allowCors, _tokenAuth2.default.verifyToken, _candidatesCtr2.default.getAllCandidates);

// user login
app.post('/api/v1/auth/signup', _userCtr2.default.createUser);

app.post('/api/v1/auth/login', _userCtr2.default.login);

// user/admin logout
app.post('/api/v1/auth/signout', _tokenAuth2.default.verifyToken, _userCtr2.default.signout);

app.get('/', function (req, res) {
  return res.status(200).send({
    status: 200,
    message: 'Welcome to POLITICO'
  });
});

// Handle 404: send an 404 error page
// app.use(function(req, res) {
//   res.status(404).sendFile(path.join(__dirname + '../../UI/views/404.html'));
// });

// Handle 500: send a 500 error
// app.use(function(error, req, res, next) {
//   res.status(500).sendFile(path.join(__dirname + '../../UI/views/500.html'));
// });

app.all('*', function (req, res) {
  res.status(404).send({
    status: 404,
    error: 'Resource not found on the server'
  });
});

app.listen(port, function () {
  console.log('app is running on port ' + port);
});

exports.default = app;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9pbmRleC5qcyJdLCJuYW1lcyI6WyJhcHAiLCJyZXMiLCJuZXh0IiwiZXhwcmVzcyIsInBhdGgiLCJib2R5UGFyc2VyIiwiZXh0ZW5kZWQiLCJwb3J0IiwicHJvY2VzcyIsIl9fZGlybmFtZSIsInN0YXR1cyIsIm1lc3NhZ2UiLCJ0b2tlbiIsInZlcmlmeUFkbWluIiwicGFydHlDdHIiLCJPZmZpY2UiLCJ2ZXJpZnlJZCIsImNhbmRpZGF0ZUN0ciIsInVzZXJDdHIiLCJhbGxvd0NvcnMiLCJ2b3Rlc0N0ciIsImVycm9yIiwiY29uc29sZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQ0EsSUFBQSxXQUFBLFFBQUEsU0FBQSxDQUFBOzs7O0FBQ0EsSUFBQSxRQUFBLFFBQUEsTUFBQSxDQUFBOzs7O0FBQ0EsSUFBQSxRQUFBLFFBQUEsTUFBQSxDQUFBOzs7O0FBQ0EsSUFBQSxjQUFBLFFBQUEsYUFBQSxDQUFBOzs7O0FBQ0EsSUFBQSxhQUFBLFFBQUEseUJBQUEsQ0FBQTs7OztBQUNBLElBQUEsV0FBQSxRQUFBLHVCQUFBLENBQUE7Ozs7QUFDQSxJQUFBLFlBQUEsUUFBQSx3QkFBQSxDQUFBOzs7O0FBQ0EsSUFBQSxpQkFBQSxRQUFBLDZCQUFBLENBQUE7Ozs7QUFDQSxJQUFBLFlBQUEsUUFBQSx3QkFBQSxDQUFBOzs7O0FBQ0EsSUFBQSxhQUFBLFFBQUEsb0JBQUEsQ0FBQTs7OztBQUNBLElBQUEsZUFBQSxRQUFBLHNCQUFBLENBQUE7Ozs7QUFDQSxJQUFBLFlBQUEsUUFBQSxtQkFBQSxDQUFBOzs7O0FBQ0EsSUFBQSxhQUFBLFFBQUEsb0JBQUEsQ0FBQTs7Ozs7Ozs7QUFHQSxJQUFNQSxNQUFNLENBQUEsR0FBQSxVQUFaLE9BQVksR0FBWixDLENBaEJBOzs7QUFrQkFBLElBQUFBLEdBQUFBLENBQVEsQ0FBQSxHQUFBLE9BQVJBLE9BQVEsR0FBUkE7O0FBRUFBLElBQUFBLEdBQUFBLENBQUFBLEdBQUFBLEVBQWEsVUFBQSxHQUFBLEVBQUEsR0FB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RmpCLGdCQUFBQTs7QUFPQTtBQUNBQSxJQUFBQSxJQUFBQSxDQUFBQSxxQkFBQUEsRUFFRWtCLFVBQUFBLE9BQUFBLENBRkZsQixVQUFBQTs7QUFLQUEsSUFBQUEsSUFBQUEsQ0FBQUEsb0JBQUFBLEVBRUVrQixVQUFBQSxPQUFBQSxDQUZGbEIsS0FBQUE7O0FBS0E7QUFDQUEsSUFBQUEsSUFBQUEsQ0FBQUEsc0JBQUFBLEVBRUVZLFlBQUFBLE9BQUFBLENBRkZaLFdBQUFBLEVBR0VrQixVQUFBQSxPQUFBQSxDQUhGbEIsT0FBQUE7O0FBTUFBLElBQUFBLEdBQUFBLENBQUFBLEdBQUFBLEVBQWEsVUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBO0FBQUEsU0FBYyxJQUFBLE1BQUEsQ0FBQSxHQUFBLEVBQUEsSUFBQSxDQUFxQjtBQUM5Q1UsWUFEOEMsR0FBQTtBQUU5Q0MsYUFBUztBQUZxQyxHQUFyQixDQUFkO0FBQWJYLENBQUFBOztBQUtBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBQSxJQUFBQSxHQUFBQSxDQUFBQSxHQUFBQSxFQUFhLFVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBYztBQUN6QkMsTUFBQUEsTUFBQUEsQ0FBQUEsR0FBQUEsRUFBQUEsSUFBQUEsQ0FBcUI7QUFDbkJTLFlBRG1CLEdBQUE7QUFFbkJXLFdBQU87QUFGWSxHQUFyQnBCO0FBREZELENBQUFBOztBQU9BQSxJQUFBQSxNQUFBQSxDQUFBQSxJQUFBQSxFQUFpQixZQUFNO0FBQ3JCc0IsVUFBQUEsR0FBQUEsQ0FBQUEsNEJBQUFBLElBQUFBO0FBREZ0QixDQUFBQTs7a0JBSWVBLEciLCJzb3VyY2VzQ29udGVudCI6WyIvLyBpbXBvcnQgeyBqc29uLCB1cmxlbmNvZGVkIH0gZnJvbSAnYm9keS1wYXJzZXInO1xuaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgY29ycyBmcm9tICdjb3JzJztcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IGJvZHlQYXJzZXIgZnJvbSAnYm9keS1wYXJzZXInO1xuaW1wb3J0IE9mZmljZSBmcm9tICcuL2NvbnRyb2xsZXJzL29mZmljZUN0cic7XG5pbXBvcnQgdXNlckN0ciBmcm9tICcuL2NvbnRyb2xsZXJzL3VzZXJDdHInO1xuaW1wb3J0IHBhcnR5Q3RyIGZyb20gJy4vY29udHJvbGxlcnMvcGFydHlDdHInO1xuaW1wb3J0IGNhbmRpZGF0ZUN0ciBmcm9tICcuL2NvbnRyb2xsZXJzL2NhbmRpZGF0ZXNDdHInO1xuaW1wb3J0IHZvdGVzQ3RyIGZyb20gJy4vY29udHJvbGxlcnMvdm90ZXNDdHInO1xuaW1wb3J0IHRva2VuIGZyb20gJy4vaGVscGVyL3Rva2VuQXV0aCc7XG5pbXBvcnQgdmVyaWZ5QWRtaW4gZnJvbSAnLi9oZWxwZXIvdmVyaWZ5QWRtaW4nO1xuaW1wb3J0IHZlcmlmeUlkIGZyb20gJy4vaGVscGVyL3VzZXJBdXRoJztcbmltcG9ydCBhbGxvd0NvcnMgZnJvbSAnLi9oZWxwZXIvYWxsb3dDb3JzJztcblxuXG5jb25zdCBhcHAgPSBleHByZXNzKCk7XG5cbmFwcC51c2UoY29ycygpKTtcblxuYXBwLnVzZSgnKicsIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nLCAnKicpO1xuICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzJywgJ1BVVCwgR0VULCBQT1NULCBERUxFVEUsIE9QVElPTlMnKTtcbiAgcmVzLmhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctSGVhZGVycycsICdDb250ZW50LVR5cGUnKTtcbiAgbmV4dCgpO1xufSk7XG5cbmFwcC51c2UoZXhwcmVzcy5zdGF0aWMocGF0aC5qb2luKF9fZGlybmFtZSkpKTtcbmFwcC51c2UoJy9zdHlsZXMnLCBleHByZXNzLnN0YXRpYyhgJHtfX2Rpcm5hbWUgIH0uLi8uLi9VSS9zdHlsZXNgKSk7XG5hcHAudXNlKCcvaW1hZ2VzJywgZXhwcmVzcy5zdGF0aWMoYCR7X19kaXJuYW1lICB9Li4vLi4vVUkvaW1hZ2VzYCkpO1xuYXBwLnVzZSgnL3NjcmlwdHMnLCBleHByZXNzLnN0YXRpYyhgJHtfX2Rpcm5hbWUgIH0uLi8uLi9VSS9zY3JpcHRzYCkpO1xuYXBwLnVzZSgnL3ZpZXdzJywgZXhwcmVzcy5zdGF0aWMoYCR7X19kaXJuYW1lICB9Li4vLi4vVUkvdmlld3NgKSk7XG5cblxuYXBwLnVzZShib2R5UGFyc2VyLmpzb24oKSk7XG5hcHAudXNlKGJvZHlQYXJzZXIudXJsZW5jb2RlZCh7XG4gIGV4dGVuZGVkOiB0cnVlLFxufSkpO1xuXG5hcHAudXNlKGV4cHJlc3MuanNvbigpKTtcbmNvbnN0IHBvcnQgPSBwcm9jZXNzLmVudi5QT1JUIHx8IDMwMDA7XG5cbi8vIGhvbWVwYWdlXG5hcHAuZ2V0KCcvJywgKHJlcSwgcmVzKSA9PiB7XG4gIHJlcy5zZW5kRmlsZShwYXRoLmpvaW4oX19kaXJuYW1lICsgJy4uLy4uL1VJL3ZpZXdzL2luZGV4Lmh0bWwnKSk7XG59KTtcblxuYXBwLmdldCgnL2FwaS92MScsIChyZXEsIHJlcykgPT4gcmVzLnN0YXR1cygyMDApLnNlbmQoe1xuICBzdGF0dXM6IDIwMCxcbiAgbWVzc2FnZTogJ1dlbGNvbWUgdG8gUE9MSVRJQ08nLFxufSkpO1xuLy8gYWRtaW46IGNyZWF0ZSwgZWRpdFxuYXBwLnBvc3QoXG4gICcvYXBpL3YxL3BhcnRpZXMnLFxuICB0b2tlbi52ZXJpZnlUb2tlbixcbiAgdmVyaWZ5QWRtaW4udmVyaWZ5SXNBZG1pbixcbiAgcGFydHlDdHIuY3JlYXRlLFxuKTtcblxuYXBwLnBhdGNoKFxuICAnL2FwaS92MS9wYXJ0aWVzLzppZC9uYW1lJyxcbiAgdG9rZW4udmVyaWZ5VG9rZW4sXG4gIHZlcmlmeUFkbWluLnZlcmlmeUlzQWRtaW4sXG4gIHBhcnR5Q3RyLnVwZGF0ZSxcbik7XG5cbmFwcC5kZWxldGUoXG4gICcvYXBpL3YxL3BhcnRpZXMvOmlkJyxcbiAgdG9rZW4udmVyaWZ5VG9rZW4sXG4gIHZlcmlmeUFkbWluLnZlcmlmeUlzQWRtaW4sXG4gIHBhcnR5Q3RyLmRlbGV0ZSxcbik7XG5cbmFwcC5wb3N0KFxuICAnL2FwaS92MS9vZmZpY2VzJyxcbiAgdG9rZW4udmVyaWZ5VG9rZW4sXG4gIHZlcmlmeUFkbWluLnZlcmlmeUlzQWRtaW4sXG4gIE9mZmljZS5jcmVhdGUsXG4pO1xuXG5hcHAucG9zdChcbiAgJy9hcGkvdjEvb2ZmaWNlLzp1c2VyaWQvcmVnaXN0ZXInLFxuICB0b2tlbi52ZXJpZnlUb2tlbixcbiAgdmVyaWZ5QWRtaW4udmVyaWZ5SXNBZG1pbixcbiAgdmVyaWZ5SWQudmFsaWRhdGVVc2VySWQsXG4gIGNhbmRpZGF0ZUN0ci5yZWdpc3Rlcixcbik7XG5cbmFwcC5nZXQoXG4gICcvYXBpL3YxL3VzZXJzJyxcbiAgdG9rZW4udmVyaWZ5VG9rZW4sXG4gIHZlcmlmeUFkbWluLnZlcmlmeUlzQWRtaW4sXG4gIHZlcmlmeUlkLnZhbGlkYXRlVXNlcklkLFxuICB1c2VyQ3RyLmdldEFsbFVzZXJzLFxuKTtcblxuXG4vLyB1c2VyXG5hcHAuZ2V0KFxuICAnL2FwaS92MS9wYXJ0aWVzJyxcbiAgdG9rZW4udmVyaWZ5VG9rZW4sXG4gIHBhcnR5Q3RyLmdldFBhcnRpZXMsXG4pO1xuXG5hcHAuZ2V0KFxuICAnL2FwaS92MS9wYXJ0aWVzLzppZCcsXG4gIHRva2VuLnZlcmlmeVRva2VuLFxuICBwYXJ0eUN0ci5nZXRBUGFydHksXG4pO1xuXG5hcHAuZ2V0KFxuICAnL2FwaS92MS9vZmZpY2VzJyxcbiAgYWxsb3dDb3JzLmFsbG93Q29ycyxcbiAgdG9rZW4udmVyaWZ5VG9rZW4sXG4gIE9mZmljZS5nZXRBbGxPZmZpY2VzLFxuKTtcblxuYXBwLmdldChcbiAgJy9hcGkvdjEvb2ZmaWNlcy86aWQnLFxuICB0b2tlbi52ZXJpZnlUb2tlbixcbiAgT2ZmaWNlLmdldE9uZU9mZmljZSxcbik7XG5cbmFwcC5wb3N0KFxuICAnL2FwaS92MS92b3RlcycsXG4gIHRva2VuLnZlcmlmeVRva2VuLFxuICB2b3Rlc0N0ci52b3Rlcyxcbik7XG5cbmFwcC5nZXQoXG4gICcvYXBpL3YxL29mZmljZS86b2ZmaWNlaWQvcmVzdWx0JyxcbiAgdG9rZW4udmVyaWZ5VG9rZW4sXG4gIE9mZmljZS5vZmZpY2VSZXN1bHQsXG4pO1xuXG5hcHAuZ2V0KFxuICAnL2FwaS92MS9jYW5kaWRhdGVzJyxcbiAgYWxsb3dDb3JzLmFsbG93Q29ycyxcbiAgdG9rZW4udmVyaWZ5VG9rZW4sXG4gIGNhbmRpZGF0ZUN0ci5nZXRBbGxDYW5kaWRhdGVzLFxuKTtcblxuLy8gdXNlciBsb2dpblxuYXBwLnBvc3QoXG4gICcvYXBpL3YxL2F1dGgvc2lnbnVwJyxcbiAgdXNlckN0ci5jcmVhdGVVc2VyLFxuKTtcblxuYXBwLnBvc3QoXG4gICcvYXBpL3YxL2F1dGgvbG9naW4nLFxuICB1c2VyQ3RyLmxvZ2luLFxuKTtcblxuLy8gdXNlci9hZG1pbiBsb2dvdXRcbmFwcC5wb3N0KFxuICAnL2FwaS92MS9hdXRoL3NpZ25vdXQnLFxuICB0b2tlbi52ZXJpZnlUb2tlbixcbiAgdXNlckN0ci5zaWdub3V0LFxuKTtcblxuYXBwLmdldCgnLycsIChyZXEsIHJlcykgPT4gcmVzLnN0YXR1cygyMDApLnNlbmQoe1xuICBzdGF0dXM6IDIwMCxcbiAgbWVzc2FnZTogJ1dlbGNvbWUgdG8gUE9MSVRJQ08nLFxufSkpO1xuXG4vLyBIYW5kbGUgNDA0OiBzZW5kIGFuIDQwNCBlcnJvciBwYWdlXG4vLyBhcHAudXNlKGZ1bmN0aW9uKHJlcSwgcmVzKSB7XG4vLyAgIHJlcy5zdGF0dXMoNDA0KS5zZW5kRmlsZShwYXRoLmpvaW4oX19kaXJuYW1lICsgJy4uLy4uL1VJL3ZpZXdzLzQwNC5odG1sJykpO1xuLy8gfSk7XG5cbi8vIEhhbmRsZSA1MDA6IHNlbmQgYSA1MDAgZXJyb3Jcbi8vIGFwcC51c2UoZnVuY3Rpb24oZXJyb3IsIHJlcSwgcmVzLCBuZXh0KSB7XG4vLyAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kRmlsZShwYXRoLmpvaW4oX19kaXJuYW1lICsgJy4uLy4uL1VJL3ZpZXdzLzUwMC5odG1sJykpO1xuLy8gfSk7XG5cbmFwcC5hbGwoJyonLCAocmVxLCByZXMpID0+IHtcbiAgcmVzLnN0YXR1cyg0MDQpLnNlbmQoe1xuICAgIHN0YXR1czogNDA0LFxuICAgIGVycm9yOiAnUmVzb3VyY2Ugbm90IGZvdW5kIG9uIHRoZSBzZXJ2ZXInLFxuICB9KTtcbn0pO1xuXG5hcHAubGlzdGVuKHBvcnQsICgpID0+IHtcbiAgY29uc29sZS5sb2coYGFwcCBpcyBydW5uaW5nIG9uIHBvcnQgJHtwb3J0fWApO1xufSk7XG5cbmV4cG9ydCBkZWZhdWx0IGFwcDtcbiJdfQ==