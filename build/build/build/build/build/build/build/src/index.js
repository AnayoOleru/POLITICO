'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _express = require('express');

var _express2 = _interopRequireDefault(_express);

var _officeCtr = require('./controllers/officeCtr');

var _officeCtr2 = _interopRequireDefault(_officeCtr);

var _userCtr = require('./controllers/userCtr');

var _userCtr2 = _interopRequireDefault(_userCtr);

var _partyCtr = require('./controllers/partyCtr');

var _partyCtr2 = _interopRequireDefault(_partyCtr);

var _candidatesCtr = require('./controllers/candidatesCtr');

var _candidatesCtr2 = _interopRequireDefault(_candidatesCtr);

var _votesCtr = require('./controllers/votesCtr');

var _votesCtr2 = _interopRequireDefault(_votesCtr);

var _tokenAuth = require('./helper/tokenAuth');

var _tokenAuth2 = _interopRequireDefault(_tokenAuth);

var _verifyAdmin = require('./helper/verifyAdmin');

var _verifyAdmin2 = _interopRequireDefault(_verifyAdmin);

var _userAuth = require('./helper/userAuth');

var _userAuth2 = _interopRequireDefault(_userAuth);

var _path = require('path');

var _path2 = _interopRequireDefault(_path);

var _bodyParser = require('body-parser');

var _bodyParser2 = _interopRequireDefault(_bodyParser);

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : { default: obj };
}

var app = (0, _express2.default)(); // import { json, urlencoded } from 'body-parser';


app.use('*', function (req, res, next) {
  res.header('Access-Control-Allow-Origin', '*');
  res.header('Access-Control-Allow-Methods', 'PUT, GET, POST, DELETE, OPTIONS');
  res.header('Access-Control-Allow-Headers', 'Content-Type');
  next();
});

app.use(_express2.default.static(_path2.default.join(__dirname)));
app.use("/styles", _express2.default.static(__dirname + '../../UI/styles'));
app.use("/images", _express2.default.static(__dirname + '../../UI/images'));
app.use("/scripts", _express2.default.static(__dirname + '../../UI/scripts'));
app.use("/views", _express2.default.static(__dirname + '../../UI/views'));

app.use(_bodyParser2.default.json());
app.use(_bodyParser2.default.urlencoded({
  extended: true
}));

app.use(_express2.default.json());
var port = process.env.PORT || 3000;

// homepage
app.get('/', function (req, res) {
  res.sendFile(_path2.default.join(__dirname + '../../UI/views/index.html'));
});

app.get('/api/v1', function (req, res) {
  return res.status(200).send({
    "status": 200,
    "message": 'Welcome to POLITICO'
  });
});
// admin: create, edit
app.post('/api/v1/parties', _tokenAuth2.default.verifyToken, _verifyAdmin2.default.verifyIsAdmin, _partyCtr2.default.create);

app.patch('/api/v1/parties/:id/name', _tokenAuth2.default.verifyToken, _verifyAdmin2.default.verifyIsAdmin, _partyCtr2.default.update);

app.delete('/api/v1/parties/:id', _tokenAuth2.default.verifyToken, _verifyAdmin2.default.verifyIsAdmin, _partyCtr2.default.delete);

app.post('/api/v1/offices', _tokenAuth2.default.verifyToken, _verifyAdmin2.default.verifyIsAdmin, _officeCtr2.default.create);

app.post('/api/v1/office/:userid/register', _tokenAuth2.default.verifyToken, _verifyAdmin2.default.verifyIsAdmin, _userAuth2.default.validateUserId, _candidatesCtr2.default.register);

app.get('/api/v1/users', _tokenAuth2.default.verifyToken, _verifyAdmin2.default.verifyIsAdmin, _userAuth2.default.validateUserId, _userCtr2.default.getAllUsers);

// user
app.get('/api/v1/parties', _tokenAuth2.default.verifyToken, _partyCtr2.default.getParties);

app.get('/api/v1/parties/:id', _tokenAuth2.default.verifyToken, _partyCtr2.default.getAParty);

app.get('/api/v1/offices', _tokenAuth2.default.verifyToken, _officeCtr2.default.getAllOffices);

app.get('/api/v1/offices/:id', _tokenAuth2.default.verifyToken, _officeCtr2.default.getOneOffice);

app.post('/api/v1/votes', _tokenAuth2.default.verifyToken, _votesCtr2.default.votes);

app.get('/api/v1/office/:officeid/result', _tokenAuth2.default.verifyToken, _officeCtr2.default.officeResult);

app.get('/api/v1/candidates', _tokenAuth2.default.verifyToken, _candidatesCtr2.default.getAllCandidates);

// user login
app.post('/api/v1/auth/signup', _userCtr2.default.createUser);

app.post('/api/v1/auth/login', _userCtr2.default.login);

// user/admin logout
app.post('/api/v1/auth/signout', _tokenAuth2.default.verifyToken, _userCtr2.default.signout);

app.get('/', function (req, res) {
  return res.status(200).send({
    "status": 200,
    "message": 'Welcome to POLITICO'
  });
});

// Handle 404: send an 404 error page
// app.use(function(req, res) {
//   res.status(404).sendFile(path.join(__dirname + '../../UI/views/404.html'));
// });

// Handle 500: send a 500 error
// app.use(function(error, req, res, next) {
//   res.status(500).sendFile(path.join(__dirname + '../../UI/views/500.html'));
// });

app.all('*', function (req, res) {
  res.status(404).send({
    "status": 404,
    "error": "Resource not found on the server"
  });
});

app.listen(port, function () {
  console.log('app is running on port ' + port);
});

exports.default = app;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9pbmRleC5qcyJdLCJuYW1lcyI6WyJhcHAiLCJyZXMiLCJuZXh0IiwiZXhwcmVzcyIsInBhdGgiLCJfX2Rpcm5hbWUiLCJib2R5UGFyc2VyIiwiZXh0ZW5kZWQiLCJwb3J0IiwicHJvY2VzcyIsInRva2VuIiwidmVyaWZ5QWRtaW4iLCJwYXJ0eUN0ciIsIk9mZmljZSIsInZlcmlmeUlkIiwiY2FuZGlkYXRlQ3RyIiwidXNlckN0ciIsInZvdGVzQ3RyIiwiY29uc29sZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQ0EsSUFBQSxXQUFBLFFBQUEsU0FBQSxDQUFBOzs7O0FBQ0EsSUFBQSxhQUFBLFFBQUEseUJBQUEsQ0FBQTs7OztBQUNBLElBQUEsV0FBQSxRQUFBLHVCQUFBLENBQUE7Ozs7QUFDQSxJQUFBLFlBQUEsUUFBQSx3QkFBQSxDQUFBOzs7O0FBQ0EsSUFBQSxpQkFBQSxRQUFBLDZCQUFBLENBQUE7Ozs7QUFDQSxJQUFBLFlBQUEsUUFBQSx3QkFBQSxDQUFBOzs7O0FBQ0EsSUFBQSxhQUFBLFFBQUEsb0JBQUEsQ0FBQTs7OztBQUNBLElBQUEsZUFBQSxRQUFBLHNCQUFBLENBQUE7Ozs7QUFDQSxJQUFBLFlBQUEsUUFBQSxtQkFBQSxDQUFBOzs7O0FBRUEsSUFBQSxRQUFBLFFBQUEsTUFBQSxDQUFBOzs7O0FBQ0EsSUFBQSxjQUFBLFFBQUEsYUFBQSxDQUFBOzs7Ozs7OztBQUdBLElBQU1BLE1BQU0sQ0FBQSxHQUFBLFVBQVosT0FBWSxHQUFaLEMsQ0FmQTs7O0FBaUJBQSxJQUFBQSxHQUFBQSxDQUFBQSxHQUFBQSxFQUFhLFVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxJQUFBLEVBQW9CO0FBQy9CQyxNQUFBQSxNQUFBQSxDQUFBQSw2QkFBQUEsRUFBQUEsR0FBQUE7QUFDQUEsTUFBQUEsTUFBQUEsQ0FBQUEsOEJBQUFBLEVBQUFBLGlDQUFBQTtBQUNBQSxNQUFBQSxNQUFBQSxDQUFBQSw4QkFBQUEsRUFBQUEsY0FBQUE7QUFDQUM7QUFK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QUhGaEIsT0FBQUE7O0FBTUZBLElBQUFBLEdBQUFBLENBQUFBLEdBQUFBLEVBQWEsVUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBO0FBQUEsU0FBYyxJQUFBLE1BQUEsQ0FBQSxHQUFBLEVBQUEsSUFBQSxDQUFxQjtBQUM5QyxjQUQ4QyxHQUFBO0FBRTlDLGVBQVc7QUFGbUMsR0FBckIsQ0FBZDtBQUFiQSxDQUFBQTs7QUFLQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQUEsSUFBQUEsR0FBQUEsQ0FBQUEsR0FBQUEsRUFBYSxVQUFBLEdBQUEsRUFBQSxHQUFBLEVBQWE7QUFDeEJDLE1BQUFBLE1BQUFBLENBQUFBLEdBQUFBLEVBQUFBLElBQUFBLENBQXFCO0FBQ25CLGNBRG1CLEdBQUE7QUFFbkIsYUFBUztBQUZVLEdBQXJCQTtBQURGRCxDQUFBQTs7QUFPQUEsSUFBQUEsTUFBQUEsQ0FBQUEsSUFBQUEsRUFBaUIsWUFBTTtBQUNyQmtCLFVBQUFBLEdBQUFBLENBQUFBLDRCQUFBQSxJQUFBQTtBQURGbEIsQ0FBQUE7O2tCQUllQSxHIiwic291cmNlc0NvbnRlbnQiOlsiLy8gaW1wb3J0IHsganNvbiwgdXJsZW5jb2RlZCB9IGZyb20gJ2JvZHktcGFyc2VyJztcbmltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IE9mZmljZSBmcm9tICcuL2NvbnRyb2xsZXJzL29mZmljZUN0cic7XG5pbXBvcnQgdXNlckN0ciBmcm9tICcuL2NvbnRyb2xsZXJzL3VzZXJDdHInO1xuaW1wb3J0IHBhcnR5Q3RyIGZyb20gJy4vY29udHJvbGxlcnMvcGFydHlDdHInO1xuaW1wb3J0IGNhbmRpZGF0ZUN0ciBmcm9tICcuL2NvbnRyb2xsZXJzL2NhbmRpZGF0ZXNDdHInO1xuaW1wb3J0IHZvdGVzQ3RyIGZyb20gJy4vY29udHJvbGxlcnMvdm90ZXNDdHInO1xuaW1wb3J0IHRva2VuIGZyb20gJy4vaGVscGVyL3Rva2VuQXV0aCc7XG5pbXBvcnQgdmVyaWZ5QWRtaW4gZnJvbSAnLi9oZWxwZXIvdmVyaWZ5QWRtaW4nO1xuaW1wb3J0IHZlcmlmeUlkIGZyb20gJy4vaGVscGVyL3VzZXJBdXRoJztcblxuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgYm9keVBhcnNlciBmcm9tICdib2R5LXBhcnNlcic7XG5cblxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xuXG5hcHAudXNlKCcqJywgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbicsICcqJyk7XG4gIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU1ldGhvZHMnLCAnUFVULCBHRVQsIFBPU1QsIERFTEVURSwgT1BUSU9OUycpO1xuICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJywgJ0NvbnRlbnQtVHlwZScpO1xuICBuZXh0KCk7XG59KTtcblxuYXBwLnVzZShleHByZXNzLnN0YXRpYyhwYXRoLmpvaW4oX19kaXJuYW1lKSkpO1xuYXBwLnVzZShcIi9zdHlsZXNcIiwgZXhwcmVzcy5zdGF0aWMoX19kaXJuYW1lICsgJy4uLy4uL1VJL3N0eWxlcycpKTtcbmFwcC51c2UoXCIvaW1hZ2VzXCIsIGV4cHJlc3Muc3RhdGljKF9fZGlybmFtZSArICcuLi8uLi9VSS9pbWFnZXMnKSk7XG5hcHAudXNlKFwiL3NjcmlwdHNcIiwgZXhwcmVzcy5zdGF0aWMoX19kaXJuYW1lICsgJy4uLy4uL1VJL3NjcmlwdHMnKSk7XG5hcHAudXNlKFwiL3ZpZXdzXCIsIGV4cHJlc3Muc3RhdGljKF9fZGlybmFtZSArICcuLi8uLi9VSS92aWV3cycpKTtcblxuXG5hcHAudXNlKGJvZHlQYXJzZXIuanNvbigpKTtcbmFwcC51c2UoYm9keVBhcnNlci51cmxlbmNvZGVkKHtcbiAgZXh0ZW5kZWQ6IHRydWVcbn0pKTtcblxuYXBwLnVzZShleHByZXNzLmpzb24oKSlcbmNvbnN0IHBvcnQgPSBwcm9jZXNzLmVudi5QT1JUIHx8IDMwMDA7XG5cbi8vIGhvbWVwYWdlXG5hcHAuZ2V0KCcvJywgZnVuY3Rpb24gKHJlcSwgcmVzKSB7XG4gIHJlcy5zZW5kRmlsZShwYXRoLmpvaW4oX19kaXJuYW1lICsgJy4uLy4uL1VJL3ZpZXdzL2luZGV4Lmh0bWwnKSk7XG59KTtcblxuYXBwLmdldCgnL2FwaS92MScsIChyZXEsIHJlcykgPT4gcmVzLnN0YXR1cygyMDApLnNlbmQoe1xuICBcInN0YXR1c1wiOiAyMDAsXG4gIFwibWVzc2FnZVwiOiAnV2VsY29tZSB0byBQT0xJVElDTydcbn0pKTtcbi8vIGFkbWluOiBjcmVhdGUsIGVkaXRcbmFwcC5wb3N0KFxuICAnL2FwaS92MS9wYXJ0aWVzJywgXG4gIHRva2VuLnZlcmlmeVRva2VuLCBcbiAgdmVyaWZ5QWRtaW4udmVyaWZ5SXNBZG1pbiwgXG4gIHBhcnR5Q3RyLmNyZWF0ZVxuICApO1xuXG5hcHAucGF0Y2goXG4gICcvYXBpL3YxL3BhcnRpZXMvOmlkL25hbWUnLCBcbiAgdG9rZW4udmVyaWZ5VG9rZW4sIFxuICB2ZXJpZnlBZG1pbi52ZXJpZnlJc0FkbWluLCBcbiAgcGFydHlDdHIudXBkYXRlXG4gICk7XG5cbmFwcC5kZWxldGUoXG4gICcvYXBpL3YxL3BhcnRpZXMvOmlkJywgXG4gIHRva2VuLnZlcmlmeVRva2VuLCBcbiAgdmVyaWZ5QWRtaW4udmVyaWZ5SXNBZG1pbiwgXG4gIHBhcnR5Q3RyLmRlbGV0ZVxuICApO1xuXG5hcHAucG9zdChcbiAgJy9hcGkvdjEvb2ZmaWNlcycsIFxuICB0b2tlbi52ZXJpZnlUb2tlbiwgXG4gIHZlcmlmeUFkbWluLnZlcmlmeUlzQWRtaW4sIFxuICBPZmZpY2UuY3JlYXRlXG4gICk7XG5cbmFwcC5wb3N0KFxuICAnL2FwaS92MS9vZmZpY2UvOnVzZXJpZC9yZWdpc3RlcicsIFxuICB0b2tlbi52ZXJpZnlUb2tlbiwgXG4gIHZlcmlmeUFkbWluLnZlcmlmeUlzQWRtaW4sIFxuICB2ZXJpZnlJZC52YWxpZGF0ZVVzZXJJZCwgXG4gIGNhbmRpZGF0ZUN0ci5yZWdpc3RlclxuICApO1xuXG4gIGFwcC5nZXQoXG4gICAgJy9hcGkvdjEvdXNlcnMnLCBcbiAgICB0b2tlbi52ZXJpZnlUb2tlbiwgXG4gICAgdmVyaWZ5QWRtaW4udmVyaWZ5SXNBZG1pbiwgXG4gICAgdmVyaWZ5SWQudmFsaWRhdGVVc2VySWQsXG4gICAgdXNlckN0ci5nZXRBbGxVc2Vyc1xuICAgICk7XG5cblxuLy8gdXNlclxuYXBwLmdldChcbiAgJy9hcGkvdjEvcGFydGllcycsIFxuICB0b2tlbi52ZXJpZnlUb2tlbiwgXG4gIHBhcnR5Q3RyLmdldFBhcnRpZXNcbiAgKTtcblxuYXBwLmdldChcbiAgJy9hcGkvdjEvcGFydGllcy86aWQnLCBcbiAgdG9rZW4udmVyaWZ5VG9rZW4sIFxuICBwYXJ0eUN0ci5nZXRBUGFydHlcbiAgKTtcblxuYXBwLmdldChcbiAgJy9hcGkvdjEvb2ZmaWNlcycsIFxuICB0b2tlbi52ZXJpZnlUb2tlbiwgXG4gIE9mZmljZS5nZXRBbGxPZmZpY2VzXG4gICk7XG5cbmFwcC5nZXQoXG4gICcvYXBpL3YxL29mZmljZXMvOmlkJywgXG4gIHRva2VuLnZlcmlmeVRva2VuLCBcbiAgT2ZmaWNlLmdldE9uZU9mZmljZVxuICApO1xuXG5hcHAucG9zdChcbiAgJy9hcGkvdjEvdm90ZXMnLCBcbiAgdG9rZW4udmVyaWZ5VG9rZW4sIFxuICB2b3Rlc0N0ci52b3Rlc1xuICApO1xuXG5hcHAuZ2V0KFxuICAnL2FwaS92MS9vZmZpY2UvOm9mZmljZWlkL3Jlc3VsdCcsIFxuICB0b2tlbi52ZXJpZnlUb2tlbiwgXG4gIE9mZmljZS5vZmZpY2VSZXN1bHRcbiAgKTtcblxuICBhcHAuZ2V0KFxuICAgICcvYXBpL3YxL2NhbmRpZGF0ZXMnLCBcbiAgICB0b2tlbi52ZXJpZnlUb2tlbiwgXG4gICAgY2FuZGlkYXRlQ3RyLmdldEFsbENhbmRpZGF0ZXNcbiAgICApO1xuXG4vLyB1c2VyIGxvZ2luXG5hcHAucG9zdChcbiAgJy9hcGkvdjEvYXV0aC9zaWdudXAnLCBcbiAgdXNlckN0ci5jcmVhdGVVc2VyXG4gICk7XG5cbmFwcC5wb3N0KFxuICAnL2FwaS92MS9hdXRoL2xvZ2luJywgXG4gIHVzZXJDdHIubG9naW5cbiAgKTtcblxuICAvLyB1c2VyL2FkbWluIGxvZ291dFxuICBhcHAucG9zdChcbiAgICAnL2FwaS92MS9hdXRoL3NpZ25vdXQnLFxuICAgIHRva2VuLnZlcmlmeVRva2VuLFxuICAgIHVzZXJDdHIuc2lnbm91dFxuICApXG5cbmFwcC5nZXQoJy8nLCAocmVxLCByZXMpID0+IHJlcy5zdGF0dXMoMjAwKS5zZW5kKHtcbiAgXCJzdGF0dXNcIjogMjAwLFxuICBcIm1lc3NhZ2VcIjogJ1dlbGNvbWUgdG8gUE9MSVRJQ08nXG59KSk7XG5cbi8vIEhhbmRsZSA0MDQ6IHNlbmQgYW4gNDA0IGVycm9yIHBhZ2Vcbi8vIGFwcC51c2UoZnVuY3Rpb24ocmVxLCByZXMpIHtcbi8vICAgcmVzLnN0YXR1cyg0MDQpLnNlbmRGaWxlKHBhdGguam9pbihfX2Rpcm5hbWUgKyAnLi4vLi4vVUkvdmlld3MvNDA0Lmh0bWwnKSk7XG4vLyB9KTtcblxuLy8gSGFuZGxlIDUwMDogc2VuZCBhIDUwMCBlcnJvclxuLy8gYXBwLnVzZShmdW5jdGlvbihlcnJvciwgcmVxLCByZXMsIG5leHQpIHtcbi8vICAgcmVzLnN0YXR1cyg1MDApLnNlbmRGaWxlKHBhdGguam9pbihfX2Rpcm5hbWUgKyAnLi4vLi4vVUkvdmlld3MvNTAwLmh0bWwnKSk7XG4vLyB9KTtcblxuYXBwLmFsbCgnKicsIChyZXEsIHJlcykgPT57XG4gIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHtcbiAgICBcInN0YXR1c1wiOiA0MDQsXG4gICAgXCJlcnJvclwiOiBcIlJlc291cmNlIG5vdCBmb3VuZCBvbiB0aGUgc2VydmVyXCIgXG4gIH0pXG59KVxuXG5hcHAubGlzdGVuKHBvcnQsICgpID0+IHtcbiAgY29uc29sZS5sb2coYGFwcCBpcyBydW5uaW5nIG9uIHBvcnQgJHtwb3J0fWApO1xufSk7XG5cbmV4cG9ydCBkZWZhdWx0IGFwcDsiXX0=