'use strict';

var _require = require('pg'),
    Pool = _require.Pool;

var dotenv = require('dotenv');

dotenv.config();

var pool = new Pool({
  connectionString: process.env.DATABASE_URL
});

pool.on('connect', function () {
  console.log('database is connected now');
});

/**
 * Create user Tables
 */
var createVote = function createVote() {
  var queryText = 'CREATE TABLE IF NOT EXISTS votes(\n    id UUID UNIQUE NOT NULL,\n    created_on TIMESTAMP,\n    created_by UUID NOT NULL, \n    userName VARCHAR(128) NOT NULL,\n    office UUID NOT NULL,\n    officeName VARCHAR(128) NOT NULL,\n    candidate UUID NOT NULL,\n    candidateName VARCHAR(128) NOT NULL,\n    FOREIGN KEY (office) REFERENCES office (id) ON DELETE CASCADE,\n    FOREIGN KEY (candidate) REFERENCES candidates (candidateId) ON DELETE CASCADE,\n    FOREIGN KEY (created_by) REFERENCES users (id) ON DELETE CASCADE,\n    PRIMARY KEY (office, candidate)\n  )';

  pool.query(queryText).then(function (res) {
    console.log(res);
    pool.end();
  }).catch(function (err) {
    console.log(err);
    pool.end();
  });
};
module.exports = createVote;

require('make-runnable');
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9jb250cm9sbGVycy9kYXRhYmFzZVRhYmxlcy92b3RlVGFibGVzLmpzIl0sIm5hbWVzIjpbIlBvb2wiLCJyZXF1aXJlIiwiZG90ZW52IiwicG9vbCIsImNvbm5lY3Rpb25TdHJpbmciLCJwcm9jZXNzIiwiREFUQUJBU0VfVVJMIiwiY29uc29sZSIsImNyZWF0ZVZvdGUiLCJxdWVyeVRleHQiLCJtb2R1bGUiXSwibWFwcGluZ3MiOiI7O2VBQWlCQyxRQUFBQSxJQUFBQSxDO0lBQVRELE8sU0FBQUEsSTs7QUFDUixJQUFNRSxTQUFTRCxRQUFmLFFBQWVBLENBQWY7O0FBRUFDLE9BQUFBLE1BQUFBOztBQUVBLElBQU1DLE9BQU8sSUFBQSxJQUFBLENBQVM7QUFDcEJDLG9CQUFrQkMsUUFBQUEsR0FBQUEsQ0FBWUM7QUFEVixDQUFULENBQWI7O0FBSUFILEtBQUFBLEVBQUFBLENBQUFBLFNBQUFBLEVBQW1CLFlBQU07QUFDdkJJLFVBQUFBLEdBQUFBLENBQUFBLDJCQUFBQTtBQURGSixDQUFBQTs7QUFJQTs7O0FBR0EsSUFBTUssYUFBYSxTQUFiQSxVQUFhLEdBQU07QUFDdkIsTUFBTUMsWUFBTixvakJBQUE7O0FBZ0JBTixPQUFBQSxLQUFBQSxDQUFBQSxTQUFBQSxFQUFBQSxJQUFBQSxDQUNRLFVBQUEsR0FBQSxFQUFTO0FBQ2JJLFlBQUFBLEdBQUFBLENBQUFBLEdBQUFBO0FBQ0FKLFNBQUFBLEdBQUFBO0FBSEpBLEdBQUFBLEVBQUFBLEtBQUFBLENBS1MsVUFBQSxHQUFBLEVBQVM7QUFDZEksWUFBQUEsR0FBQUEsQ0FBQUEsR0FBQUE7QUFDQUosU0FBQUEsR0FBQUE7QUFQSkEsR0FBQUE7QUFqQkYsQ0FBQTtBQTJCQU8sT0FBQUEsT0FBQUEsR0FBQUEsVUFBQUE7O0FBRUFULFFBQUFBLGVBQUFBIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyBQb29sIH0gPSByZXF1aXJlKCdwZycpO1xuY29uc3QgZG90ZW52ID0gcmVxdWlyZSgnZG90ZW52Jyk7XG5cbmRvdGVudi5jb25maWcoKTtcblxuY29uc3QgcG9vbCA9IG5ldyBQb29sKHtcbiAgY29ubmVjdGlvblN0cmluZzogcHJvY2Vzcy5lbnYuREFUQUJBU0VfVVJMXG59KTtcblxucG9vbC5vbignY29ubmVjdCcsICgpID0+IHtcbiAgY29uc29sZS5sb2coJ2RhdGFiYXNlIGlzIGNvbm5lY3RlZCBub3cnKTtcbn0pO1xuXG4vKipcbiAqIENyZWF0ZSB1c2VyIFRhYmxlc1xuICovXG5jb25zdCBjcmVhdGVWb3RlID0gKCkgPT4ge1xuICBjb25zdCBxdWVyeVRleHQgPVxuICBgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgdm90ZXMoXG4gICAgaWQgVVVJRCBVTklRVUUgTk9UIE5VTEwsXG4gICAgY3JlYXRlZF9vbiBUSU1FU1RBTVAsXG4gICAgY3JlYXRlZF9ieSBVVUlEIE5PVCBOVUxMLCBcbiAgICB1c2VyTmFtZSBWQVJDSEFSKDEyOCkgTk9UIE5VTEwsXG4gICAgb2ZmaWNlIFVVSUQgTk9UIE5VTEwsXG4gICAgb2ZmaWNlTmFtZSBWQVJDSEFSKDEyOCkgTk9UIE5VTEwsXG4gICAgY2FuZGlkYXRlIFVVSUQgTk9UIE5VTEwsXG4gICAgY2FuZGlkYXRlTmFtZSBWQVJDSEFSKDEyOCkgTk9UIE5VTEwsXG4gICAgRk9SRUlHTiBLRVkgKG9mZmljZSkgUkVGRVJFTkNFUyBvZmZpY2UgKGlkKSBPTiBERUxFVEUgQ0FTQ0FERSxcbiAgICBGT1JFSUdOIEtFWSAoY2FuZGlkYXRlKSBSRUZFUkVOQ0VTIGNhbmRpZGF0ZXMgKGNhbmRpZGF0ZUlkKSBPTiBERUxFVEUgQ0FTQ0FERSxcbiAgICBGT1JFSUdOIEtFWSAoY3JlYXRlZF9ieSkgUkVGRVJFTkNFUyB1c2VycyAoaWQpIE9OIERFTEVURSBDQVNDQURFLFxuICAgIFBSSU1BUlkgS0VZIChvZmZpY2UsIGNhbmRpZGF0ZSlcbiAgKWA7XG5cbiAgcG9vbC5xdWVyeShxdWVyeVRleHQpXG4gICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgY29uc29sZS5sb2cocmVzKTtcbiAgICAgIHBvb2wuZW5kKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIHBvb2wuZW5kKCk7XG4gICAgfSk7XG59XG5tb2R1bGUuZXhwb3J0cyA9IGNyZWF0ZVZvdGU7XG5cbnJlcXVpcmUoJ21ha2UtcnVubmFibGUnKTtcblxuIl19