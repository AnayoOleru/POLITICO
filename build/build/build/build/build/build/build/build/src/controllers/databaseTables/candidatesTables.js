'use strict';

var _require = require('pg'),
    Pool = _require.Pool;

var dotenv = require('dotenv');

dotenv.config();

var pool = new Pool({
  connectionString: process.env.DATABASE_URL
});

pool.on('connect', function () {
  console.log('database is connected now');
});

/**
 * Create user Tables
 */
var createCand = function createCand() {
  var queryText = 'CREATE TABLE IF NOT EXISTS candidates(\n    candidateId UUID UNIQUE NOT NULL,\n    office UUID NOT NULL,\n    officeName VARCHAR(128) NOT NULL,\n    party UUID NOT NULL,\n    partyName VARCHAR(128) NOT NULL,\n    candidate UUID NOT NULL,\n    candidateName VARCHAR(128) NOT NULL,\n    FOREIGN KEY (office) REFERENCES office (id) ON DELETE CASCADE,\n    FOREIGN KEY (party) REFERENCES party (id) ON DELETE CASCADE,\n    FOREIGN KEY (candidate) REFERENCES users (id) ON DELETE CASCADE,\n    PRIMARY KEY (office, candidate)\n  )';

  pool.query(queryText).then(function (res) {
    console.log(res);
    pool.end();
  }).catch(function (err) {
    console.log(err);
    pool.end();
  });
};

/**
 * Drop Tables
 */
var dropCand = function dropCand() {
  var queryText = 'DROP TABLE IF EXISTS candidates';
  pool.query(queryText).then(function (res) {
    console.log(res);
    pool.end();
  }).catch(function (err) {
    console.log(err);
    pool.end();
  });
};

pool.on('remove', function () {
  console.log('Table creation exited');
  process.exit(0);
});
module.exports = {
  createCand: createCand,
  dropCand: dropCand
};

require('make-runnable');
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9jb250cm9sbGVycy9kYXRhYmFzZVRhYmxlcy9jYW5kaWRhdGVzVGFibGVzLmpzIl0sIm5hbWVzIjpbIlBvb2wiLCJyZXF1aXJlIiwiZG90ZW52IiwicG9vbCIsImNvbm5lY3Rpb25TdHJpbmciLCJwcm9jZXNzIiwiREFUQUJBU0VfVVJMIiwiY29uc29sZSIsImNyZWF0ZUNhbmQiLCJxdWVyeVRleHQiLCJkcm9wQ2FuZCIsIm1vZHVsZSJdLCJtYXBwaW5ncyI6Ijs7ZUFBaUJDLFFBQUFBLElBQUFBLEM7SUFBVEQsTyxTQUFBQSxJOztBQUNSLElBQU1FLFNBQVNELFFBQWYsUUFBZUEsQ0FBZjs7QUFFQUMsT0FBQUEsTUFBQUE7O0FBRUEsSUFBTUMsT0FBTyxJQUFBLElBQUEsQ0FBUztBQUNwQkMsb0JBQWtCQyxRQUFBQSxHQUFBQSxDQUFZQztBQURWLENBQVQsQ0FBYjs7QUFJQUgsS0FBQUEsRUFBQUEsQ0FBQUEsU0FBQUEsRUFBbUIsWUFBTTtBQUN2QkksVUFBQUEsR0FBQUEsQ0FBQUEsMkJBQUFBO0FBREZKLENBQUFBOztBQUlBOzs7QUFHQSxJQUFNSyxhQUFhLFNBQWJBLFVBQWEsR0FBTTtBQUN2QixNQUFNQyxZQUFOLCtnQkFBQTs7QUFlQU4sT0FBQUEsS0FBQUEsQ0FBQUEsU0FBQUEsRUFBQUEsSUFBQUEsQ0FDUSxVQUFBLEdBQUEsRUFBUztBQUNiSSxZQUFBQSxHQUFBQSxDQUFBQSxHQUFBQTtBQUNBSixTQUFBQSxHQUFBQTtBQUhKQSxHQUFBQSxFQUFBQSxLQUFBQSxDQUtTLFVBQUEsR0FBQSxFQUFTO0FBQ2RJLFlBQUFBLEdBQUFBLENBQUFBLEdBQUFBO0FBQ0FKLFNBQUFBLEdBQUFBO0FBUEpBLEdBQUFBO0FBaEJGLENBQUE7O0FBNEJBOzs7QUFHQSxJQUFNTyxXQUFXLFNBQVhBLFFBQVcsR0FBTTtBQUNyQixNQUFNRCxZQUFOLGlDQUFBO0FBQ0FOLE9BQUFBLEtBQUFBLENBQUFBLFNBQUFBLEVBQUFBLElBQUFBLENBQ1EsVUFBQSxHQUFBLEVBQVM7QUFDYkksWUFBQUEsR0FBQUEsQ0FBQUEsR0FBQUE7QUFDQUosU0FBQUEsR0FBQUE7QUFISkEsR0FBQUEsRUFBQUEsS0FBQUEsQ0FLUyxVQUFBLEdBQUEsRUFBUztBQUNkSSxZQUFBQSxHQUFBQSxDQUFBQSxHQUFBQTtBQUNBSixTQUFBQSxHQUFBQTtBQVBKQSxHQUFBQTtBQUZGLENBQUE7O0FBYUFBLEtBQUFBLEVBQUFBLENBQUFBLFFBQUFBLEVBQWtCLFlBQU07QUFDdEJJLFVBQUFBLEdBQUFBLENBQUFBLHVCQUFBQTtBQUNBRixVQUFBQSxJQUFBQSxDQUFBQSxDQUFBQTtBQUZGRixDQUFBQTtBQUlBUSxPQUFBQSxPQUFBQSxHQUFpQjtBQUNmSCxjQURlLFVBQUE7QUFFZkUsWUFBQUE7QUFGZSxDQUFqQkM7O0FBS0FWLFFBQUFBLGVBQUFBIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyBQb29sIH0gPSByZXF1aXJlKCdwZycpO1xuY29uc3QgZG90ZW52ID0gcmVxdWlyZSgnZG90ZW52Jyk7XG5cbmRvdGVudi5jb25maWcoKTtcblxuY29uc3QgcG9vbCA9IG5ldyBQb29sKHtcbiAgY29ubmVjdGlvblN0cmluZzogcHJvY2Vzcy5lbnYuREFUQUJBU0VfVVJMXG59KTtcblxucG9vbC5vbignY29ubmVjdCcsICgpID0+IHtcbiAgY29uc29sZS5sb2coJ2RhdGFiYXNlIGlzIGNvbm5lY3RlZCBub3cnKTtcbn0pO1xuXG4vKipcbiAqIENyZWF0ZSB1c2VyIFRhYmxlc1xuICovXG5jb25zdCBjcmVhdGVDYW5kID0gKCkgPT4ge1xuICBjb25zdCBxdWVyeVRleHQgPVxuICBgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgY2FuZGlkYXRlcyhcbiAgICBjYW5kaWRhdGVJZCBVVUlEIFVOSVFVRSBOT1QgTlVMTCxcbiAgICBvZmZpY2UgVVVJRCBOT1QgTlVMTCxcbiAgICBvZmZpY2VOYW1lIFZBUkNIQVIoMTI4KSBOT1QgTlVMTCxcbiAgICBwYXJ0eSBVVUlEIE5PVCBOVUxMLFxuICAgIHBhcnR5TmFtZSBWQVJDSEFSKDEyOCkgTk9UIE5VTEwsXG4gICAgY2FuZGlkYXRlIFVVSUQgTk9UIE5VTEwsXG4gICAgY2FuZGlkYXRlTmFtZSBWQVJDSEFSKDEyOCkgTk9UIE5VTEwsXG4gICAgRk9SRUlHTiBLRVkgKG9mZmljZSkgUkVGRVJFTkNFUyBvZmZpY2UgKGlkKSBPTiBERUxFVEUgQ0FTQ0FERSxcbiAgICBGT1JFSUdOIEtFWSAocGFydHkpIFJFRkVSRU5DRVMgcGFydHkgKGlkKSBPTiBERUxFVEUgQ0FTQ0FERSxcbiAgICBGT1JFSUdOIEtFWSAoY2FuZGlkYXRlKSBSRUZFUkVOQ0VTIHVzZXJzIChpZCkgT04gREVMRVRFIENBU0NBREUsXG4gICAgUFJJTUFSWSBLRVkgKG9mZmljZSwgY2FuZGlkYXRlKVxuICApYDtcblxuICBwb29sLnF1ZXJ5KHF1ZXJ5VGV4dClcbiAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhyZXMpO1xuICAgICAgcG9vbC5lbmQoKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgcG9vbC5lbmQoKTtcbiAgICB9KTtcbn1cblxuXG4vKipcbiAqIERyb3AgVGFibGVzXG4gKi9cbmNvbnN0IGRyb3BDYW5kID0gKCkgPT4ge1xuICBjb25zdCBxdWVyeVRleHQgPSAnRFJPUCBUQUJMRSBJRiBFWElTVFMgY2FuZGlkYXRlcyc7XG4gIHBvb2wucXVlcnkocXVlcnlUZXh0KVxuICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKHJlcyk7XG4gICAgICBwb29sLmVuZCgpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICBwb29sLmVuZCgpO1xuICAgIH0pO1xufVxuXG5wb29sLm9uKCdyZW1vdmUnLCAoKSA9PiB7XG4gIGNvbnNvbGUubG9nKCdUYWJsZSBjcmVhdGlvbiBleGl0ZWQnKTtcbiAgcHJvY2Vzcy5leGl0KDApO1xufSk7XG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgY3JlYXRlQ2FuZCxcbiAgZHJvcENhbmRcbn07XG5cbnJlcXVpcmUoJ21ha2UtcnVubmFibGUnKTtcblxuIl19