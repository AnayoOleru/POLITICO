'use strict';

// alert("connected!");

document.getElementById('loginPost').addEventListener('submit', loginPost);

function loginPost(e) {
    e.preventDefault();

    var email = document.getElementById('email').value;
    var password = document.getElementById('password').value;
    var result = document.getElementById('result');
    var responseStatus = false;

    fetch('https://trustpolitico.herokuapp.com/api/v1/auth/login', {
        method: 'POST',
        headers: {
            'Accept': 'application/json, text/plain, */*',
            'Content-type': 'application/json'
        },
        body: JSON.stringify({
            email: email,
            password: password
        })

    })

    // render user dashboard
    .then(function (res) {
        if (res.ok) {
            responseStatus = true;
        }
        return res.json();
    }).then(function (res) {
        console.log(res.data);
        if (!responseStatus) {
            result.innerHTML = res.error;
        }
        if (res.data[0].user.isadmin == true) {
            window.localStorage.setItem('token', res.data[0].token);
            window.location.href = '/views/govOffice.html';
        } else {
            window.localStorage.setItem('token', res.data[0].token);
            window.location.href = '/views/parties.html';
        }
    });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL1VJL3NjcmlwdHMvc2lnbmluLmpzIl0sIm5hbWVzIjpbImRvY3VtZW50IiwiZSIsImVtYWlsIiwicGFzc3dvcmQiLCJyZXN1bHQiLCJyZXNwb25zZVN0YXR1cyIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJyZXMiLCJjb25zb2xlIiwid2luZG93Il0sIm1hcHBpbmdzIjoiOztBQUFBOztBQUNBQSxTQUFBQSxjQUFBQSxDQUFBQSxXQUFBQSxFQUFBQSxnQkFBQUEsQ0FBQUEsUUFBQUEsRUFBQUEsU0FBQUE7O0FBRUEsU0FBQSxTQUFBLENBQUEsQ0FBQSxFQUFxQjtBQUNqQkMsTUFBQUEsY0FBQUE7O0FBRUEsUUFBSUMsUUFBUUYsU0FBQUEsY0FBQUEsQ0FBQUEsT0FBQUEsRUFBWixLQUFBO0FBQ0EsUUFBSUcsV0FBV0gsU0FBQUEsY0FBQUEsQ0FBQUEsVUFBQUEsRUFBZixLQUFBO0FBQ0EsUUFBSUksU0FBU0osU0FBQUEsY0FBQUEsQ0FBYixRQUFhQSxDQUFiO0FBQ0EsUUFBSUssaUJBQUosS0FBQTs7QUFHQUMsVUFBQUEsdURBQUFBLEVBQStEO0FBQzNEQyxnQkFEMkQsTUFBQTtBQUUzREMsaUJBQVM7QUFDTCxzQkFESyxtQ0FBQTtBQUVMLDRCQUFnQjtBQUZYLFNBRmtEO0FBTTNEQyxjQUFNLEtBQUEsU0FBQSxDQUFlO0FBQ2pCUCxtQkFEaUIsS0FBQTtBQUVqQkMsc0JBQVVBO0FBRk8sU0FBZjs7QUFOcUQsS0FBL0RHOztBQWFBO0FBYkFBLEtBQUFBLElBQUFBLENBY00sVUFBQSxHQUFBLEVBQVM7QUFDWCxZQUFHSSxJQUFILEVBQUEsRUFBVTtBQUNOTCw2QkFBQUEsSUFBQUE7QUFDSDtBQUNGLGVBQU9LLElBQVAsSUFBT0EsRUFBUDtBQWxCSEosS0FBQUEsRUFBQUEsSUFBQUEsQ0FvQk0sVUFBQSxHQUFBLEVBQVM7QUFDWEssZ0JBQUFBLEdBQUFBLENBQVlELElBQVpDLElBQUFBO0FBQ0EsWUFBRyxDQUFILGNBQUEsRUFBbUI7QUFDZlAsbUJBQUFBLFNBQUFBLEdBQW1CTSxJQUFuQk4sS0FBQUE7QUFDSDtBQUNELFlBQUdNLElBQUFBLElBQUFBLENBQUFBLENBQUFBLEVBQUFBLElBQUFBLENBQUFBLE9BQUFBLElBQUgsSUFBQSxFQUFvQztBQUNwQ0UsbUJBQUFBLFlBQUFBLENBQUFBLE9BQUFBLENBQUFBLE9BQUFBLEVBQXFDRixJQUFBQSxJQUFBQSxDQUFBQSxDQUFBQSxFQUFyQ0UsS0FBQUE7QUFDQUEsbUJBQUFBLFFBQUFBLENBQUFBLElBQUFBLEdBQUFBLHVCQUFBQTtBQUZBLFNBQUEsTUFHSztBQUNMQSxtQkFBQUEsWUFBQUEsQ0FBQUEsT0FBQUEsQ0FBQUEsT0FBQUEsRUFBcUNGLElBQUFBLElBQUFBLENBQUFBLENBQUFBLEVBQXJDRSxLQUFBQTtBQUNBQSxtQkFBQUEsUUFBQUEsQ0FBQUEsSUFBQUEsR0FBQUEscUJBQUFBO0FBQ0M7QUEvQkxOLEtBQUFBO0FBaUNIIiwic291cmNlc0NvbnRlbnQiOlsiLy8gYWxlcnQoXCJjb25uZWN0ZWQhXCIpO1xuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvZ2luUG9zdCcpLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGxvZ2luUG9zdCk7XG5cbmZ1bmN0aW9uIGxvZ2luUG9zdChlKXtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICBsZXQgZW1haWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW1haWwnKS52YWx1ZTtcbiAgICBsZXQgcGFzc3dvcmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFzc3dvcmQnKS52YWx1ZTtcbiAgICBsZXQgcmVzdWx0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3VsdCcpO1xuICAgIGxldCByZXNwb25zZVN0YXR1cyA9IGZhbHNlO1xuXG5cbiAgICBmZXRjaCgnaHR0cHM6Ly90cnVzdHBvbGl0aWNvLmhlcm9rdWFwcC5jb20vYXBpL3YxL2F1dGgvbG9naW4nLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24sIHRleHQvcGxhaW4sICovKicsXG4gICAgICAgICAgICAnQ29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIGVtYWlsOiBlbWFpbCwgXG4gICAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmRcbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgfSlcbiAgICBcbiAgICAvLyByZW5kZXIgdXNlciBkYXNoYm9hcmRcbiAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGlmKHJlcy5vayl7XG4gICAgICAgICAgICByZXNwb25zZVN0YXR1cyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICByZXR1cm4gcmVzLmpzb24oKVxuICAgIH0pXG4gICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YSk7XG4gICAgICAgIGlmKCFyZXNwb25zZVN0YXR1cyl7XG4gICAgICAgICAgICByZXN1bHQuaW5uZXJIVE1MID0gcmVzLmVycm9yO1xuICAgICAgICB9XG4gICAgICAgIGlmKHJlcy5kYXRhWzBdLnVzZXIuaXNhZG1pbiA9PSB0cnVlKXtcbiAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2tlbicsIHJlcy5kYXRhWzBdLnRva2VuKTtcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL3ZpZXdzL2dvdk9mZmljZS5odG1sJztcbiAgICAgICAgfWVsc2V7XG4gICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9rZW4nLCByZXMuZGF0YVswXS50b2tlbik7XG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy92aWV3cy9wYXJ0aWVzLmh0bWwnO1xuICAgICAgICB9XG4gICAgfSlcbn0iXX0=