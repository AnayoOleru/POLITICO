'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _express = require('express');

var _express2 = _interopRequireDefault(_express);

var _cors = require('cors');

var _cors2 = _interopRequireDefault(_cors);

var _officeCtr = require('./controllers/officeCtr');

var _officeCtr2 = _interopRequireDefault(_officeCtr);

var _userCtr = require('./controllers/userCtr');

var _userCtr2 = _interopRequireDefault(_userCtr);

var _partyCtr = require('./controllers/partyCtr');

var _partyCtr2 = _interopRequireDefault(_partyCtr);

var _candidatesCtr = require('./controllers/candidatesCtr');

var _candidatesCtr2 = _interopRequireDefault(_candidatesCtr);

var _votesCtr = require('./controllers/votesCtr');

var _votesCtr2 = _interopRequireDefault(_votesCtr);

var _tokenAuth = require('./helper/tokenAuth');

var _tokenAuth2 = _interopRequireDefault(_tokenAuth);

var _verifyAdmin = require('./helper/verifyAdmin');

var _verifyAdmin2 = _interopRequireDefault(_verifyAdmin);

var _userAuth = require('./helper/userAuth');

var _userAuth2 = _interopRequireDefault(_userAuth);

var _path = require('path');

var _path2 = _interopRequireDefault(_path);

var _bodyParser = require('body-parser');

var _bodyParser2 = _interopRequireDefault(_bodyParser);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// import { json, urlencoded } from 'body-parser';
var app = (0, _express2.default)();

app.use((0, _cors2.default)());

app.use('*', function (req, res, next) {
  res.header('Access-Control-Allow-Origin', '*');
  res.header('Access-Control-Allow-Methods', 'PUT, GET, POST, DELETE, OPTIONS');
  res.header('Access-Control-Allow-Headers', 'Content-Type');
  next();
});

app.use(_express2.default.static(_path2.default.join(__dirname)));
app.use("/styles", _express2.default.static(__dirname + '../../UI/styles'));
app.use("/images", _express2.default.static(__dirname + '../../UI/images'));
app.use("/scripts", _express2.default.static(__dirname + '../../UI/scripts'));
app.use("/views", _express2.default.static(__dirname + '../../UI/views'));

app.use(_bodyParser2.default.json());
app.use(_bodyParser2.default.urlencoded({
  extended: true
}));

app.use(_express2.default.json());
var port = process.env.PORT || 3000;

// homepage
app.get('/', function (req, res) {
  res.sendFile(_path2.default.join(__dirname + '../../UI/views/index.html'));
});

app.get('/api/v1', function (req, res) {
  return res.status(200).send({
    "status": 200,
    "message": 'Welcome to POLITICO'
  });
});
// admin: create, edit
app.post('/api/v1/parties', _tokenAuth2.default.verifyToken, _verifyAdmin2.default.verifyIsAdmin, _partyCtr2.default.create);

app.patch('/api/v1/parties/:id/name', _tokenAuth2.default.verifyToken, _verifyAdmin2.default.verifyIsAdmin, _partyCtr2.default.update);

app.delete('/api/v1/parties/:id', _tokenAuth2.default.verifyToken, _verifyAdmin2.default.verifyIsAdmin, _partyCtr2.default.delete);

app.post('/api/v1/offices', _tokenAuth2.default.verifyToken, _verifyAdmin2.default.verifyIsAdmin, _officeCtr2.default.create);

app.post('/api/v1/office/:userid/register', _tokenAuth2.default.verifyToken, _verifyAdmin2.default.verifyIsAdmin, _userAuth2.default.validateUserId, _candidatesCtr2.default.register);

app.get('/api/v1/users', _tokenAuth2.default.verifyToken, _verifyAdmin2.default.verifyIsAdmin, _userAuth2.default.validateUserId, _userCtr2.default.getAllUsers);

// user
app.get('/api/v1/parties', _tokenAuth2.default.verifyToken, _partyCtr2.default.getParties);

app.get('/api/v1/parties/:id', _tokenAuth2.default.verifyToken, _partyCtr2.default.getAParty);

app.get('/api/v1/offices', _tokenAuth2.default.verifyToken, _officeCtr2.default.getAllOffices);

app.get('/api/v1/offices/:id', _tokenAuth2.default.verifyToken, _officeCtr2.default.getOneOffice);

app.post('/api/v1/votes', _tokenAuth2.default.verifyToken, _votesCtr2.default.votes);

app.get('/api/v1/office/:officeid/result', _tokenAuth2.default.verifyToken, _officeCtr2.default.officeResult);

app.get('/api/v1/candidates', _tokenAuth2.default.verifyToken, _candidatesCtr2.default.getAllCandidates);

// user login
app.post('/api/v1/auth/signup', _userCtr2.default.createUser);

app.post('/api/v1/auth/login', _userCtr2.default.login);

// user/admin logout
app.post('/api/v1/auth/signout', _tokenAuth2.default.verifyToken, _userCtr2.default.signout);

app.get('/', function (req, res) {
  return res.status(200).send({
    "status": 200,
    "message": 'Welcome to POLITICO'
  });
});

// Handle 404: send an 404 error page
// app.use(function(req, res) {
//   res.status(404).sendFile(path.join(__dirname + '../../UI/views/404.html'));
// });

// Handle 500: send a 500 error
// app.use(function(error, req, res, next) {
//   res.status(500).sendFile(path.join(__dirname + '../../UI/views/500.html'));
// });

app.all('*', function (req, res) {
  res.status(404).send({
    "status": 404,
    "error": "Resource not found on the server"
  });
});

app.listen(port, function () {
  console.log('app is running on port ' + port);
});

exports.default = app;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9pbmRleC5qcyJdLCJuYW1lcyI6WyJhcHAiLCJ1c2UiLCJyZXEiLCJyZXMiLCJuZXh0IiwiaGVhZGVyIiwiZXhwcmVzcyIsInN0YXRpYyIsInBhdGgiLCJqb2luIiwiX19kaXJuYW1lIiwiYm9keVBhcnNlciIsImpzb24iLCJ1cmxlbmNvZGVkIiwiZXh0ZW5kZWQiLCJwb3J0IiwicHJvY2VzcyIsImVudiIsIlBPUlQiLCJnZXQiLCJzZW5kRmlsZSIsInN0YXR1cyIsInNlbmQiLCJwb3N0IiwidG9rZW4iLCJ2ZXJpZnlUb2tlbiIsInZlcmlmeUFkbWluIiwidmVyaWZ5SXNBZG1pbiIsInBhcnR5Q3RyIiwiY3JlYXRlIiwicGF0Y2giLCJ1cGRhdGUiLCJkZWxldGUiLCJPZmZpY2UiLCJ2ZXJpZnlJZCIsInZhbGlkYXRlVXNlcklkIiwiY2FuZGlkYXRlQ3RyIiwicmVnaXN0ZXIiLCJ1c2VyQ3RyIiwiZ2V0QWxsVXNlcnMiLCJnZXRQYXJ0aWVzIiwiZ2V0QVBhcnR5IiwiZ2V0QWxsT2ZmaWNlcyIsImdldE9uZU9mZmljZSIsInZvdGVzQ3RyIiwidm90ZXMiLCJvZmZpY2VSZXN1bHQiLCJnZXRBbGxDYW5kaWRhdGVzIiwiY3JlYXRlVXNlciIsImxvZ2luIiwic2lnbm91dCIsImFsbCIsImxpc3RlbiIsImNvbnNvbGUiLCJsb2ciXSwibWFwcGluZ3MiOiI7Ozs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBRUE7Ozs7QUFDQTs7Ozs7O0FBYkE7QUFnQkEsSUFBTUEsTUFBTSx3QkFBWjs7QUFFQUEsSUFBSUMsR0FBSixDQUFRLHFCQUFSOztBQUVBRCxJQUFJQyxHQUFKLENBQVEsR0FBUixFQUFhLFVBQUNDLEdBQUQsRUFBTUMsR0FBTixFQUFXQyxJQUFYLEVBQW9CO0FBQy9CRCxNQUFJRSxNQUFKLENBQVcsNkJBQVgsRUFBMEMsR0FBMUM7QUFD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RSxlQURGLEVBRUVDLG9CQUFNQyxXQUZSLEVBR0VtQixtQkFBU0MsS0FIWDs7QUFNQTdDLElBQUltQixHQUFKLENBQ0UsaUNBREYsRUFFRUssb0JBQU1DLFdBRlIsRUFHRVEsb0JBQU9hLFlBSFQ7O0FBTUU5QyxJQUFJbUIsR0FBSixDQUNFLG9CQURGLEVBRUVLLG9CQUFNQyxXQUZSLEVBR0VXLHdCQUFhVyxnQkFIZjs7QUFNRjtBQUNBL0MsSUFBSXVCLElBQUosQ0FDRSxxQkFERixFQUVFZSxrQkFBUVUsVUFGVjs7QUFLQWhELElBQUl1QixJQUFKLENBQ0Usb0JBREYsRUFFRWUsa0JBQVFXLEtBRlY7O0FBS0U7QUFDQWpELElBQUl1QixJQUFKLENBQ0Usc0JBREYsRUFFRUMsb0JBQU1DLFdBRlIsRUFHRWEsa0JBQVFZLE9BSFY7O0FBTUZsRCxJQUFJbUIsR0FBSixDQUFRLEdBQVIsRUFBYSxVQUFDakIsR0FBRCxFQUFNQyxHQUFOO0FBQUEsU0FBY0EsSUFBSWtCLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQjtBQUM5QyxjQUFVLEdBRG9DO0FBRTlDLGVBQVc7QUFGbUMsR0FBckIsQ0FBZDtBQUFBLENBQWI7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUF0QixJQUFJbUQsR0FBSixDQUFRLEdBQVIsRUFBYSxVQUFDakQsR0FBRCxFQUFNQyxHQUFOLEVBQWE7QUFDeEJBLE1BQUlrQixNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUI7QUFDbkIsY0FBVSxHQURTO0FBRW5CLGFBQVM7QUFGVSxHQUFyQjtBQUlELENBTEQ7O0FBT0F0QixJQUFJb0QsTUFBSixDQUFXckMsSUFBWCxFQUFpQixZQUFNO0FBQ3JCc0MsVUFBUUMsR0FBUiw2QkFBc0N2QyxJQUF0QztBQUNELENBRkQ7O2tCQUllZixHIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gaW1wb3J0IHsganNvbiwgdXJsZW5jb2RlZCB9IGZyb20gJ2JvZHktcGFyc2VyJztcbmltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IGNvcnMgZnJvbSAnY29ycyc7XG5pbXBvcnQgT2ZmaWNlIGZyb20gJy4vY29udHJvbGxlcnMvb2ZmaWNlQ3RyJztcbmltcG9ydCB1c2VyQ3RyIGZyb20gJy4vY29udHJvbGxlcnMvdXNlckN0cic7XG5pbXBvcnQgcGFydHlDdHIgZnJvbSAnLi9jb250cm9sbGVycy9wYXJ0eUN0cic7XG5pbXBvcnQgY2FuZGlkYXRlQ3RyIGZyb20gJy4vY29udHJvbGxlcnMvY2FuZGlkYXRlc0N0cic7XG5pbXBvcnQgdm90ZXNDdHIgZnJvbSAnLi9jb250cm9sbGVycy92b3Rlc0N0cic7XG5pbXBvcnQgdG9rZW4gZnJvbSAnLi9oZWxwZXIvdG9rZW5BdXRoJztcbmltcG9ydCB2ZXJpZnlBZG1pbiBmcm9tICcuL2hlbHBlci92ZXJpZnlBZG1pbic7XG5pbXBvcnQgdmVyaWZ5SWQgZnJvbSAnLi9oZWxwZXIvdXNlckF1dGgnO1xuXG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCBib2R5UGFyc2VyIGZyb20gJ2JvZHktcGFyc2VyJztcblxuXG5jb25zdCBhcHAgPSBleHByZXNzKCk7XG5cbmFwcC51c2UoY29ycygpKTtcblxuYXBwLnVzZSgnKicsIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nLCAnKicpO1xuICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzJywgJ1BVVCwgR0VULCBQT1NULCBERUxFVEUsIE9QVElPTlMnKTtcbiAgcmVzLmhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctSGVhZGVycycsICdDb250ZW50LVR5cGUnKTtcbiAgbmV4dCgpO1xufSk7XG5cbmFwcC51c2UoZXhwcmVzcy5zdGF0aWMocGF0aC5qb2luKF9fZGlybmFtZSkpKTtcbmFwcC51c2UoXCIvc3R5bGVzXCIsIGV4cHJlc3Muc3RhdGljKF9fZGlybmFtZSArICcuLi8uLi9VSS9zdHlsZXMnKSk7XG5hcHAudXNlKFwiL2ltYWdlc1wiLCBleHByZXNzLnN0YXRpYyhfX2Rpcm5hbWUgKyAnLi4vLi4vVUkvaW1hZ2VzJykpO1xuYXBwLnVzZShcIi9zY3JpcHRzXCIsIGV4cHJlc3Muc3RhdGljKF9fZGlybmFtZSArICcuLi8uLi9VSS9zY3JpcHRzJykpO1xuYXBwLnVzZShcIi92aWV3c1wiLCBleHByZXNzLnN0YXRpYyhfX2Rpcm5hbWUgKyAnLi4vLi4vVUkvdmlld3MnKSk7XG5cblxuYXBwLnVzZShib2R5UGFyc2VyLmpzb24oKSk7XG5hcHAudXNlKGJvZHlQYXJzZXIudXJsZW5jb2RlZCh7XG4gIGV4dGVuZGVkOiB0cnVlXG59KSk7XG5cbmFwcC51c2UoZXhwcmVzcy5qc29uKCkpXG5jb25zdCBwb3J0ID0gcHJvY2Vzcy5lbnYuUE9SVCB8fCAzMDAwO1xuXG4vLyBob21lcGFnZVxuYXBwLmdldCgnLycsIGZ1bmN0aW9uIChyZXEsIHJlcykge1xuICByZXMuc2VuZEZpbGUocGF0aC5qb2luKF9fZGlybmFtZSArICcuLi8uLi9VSS92aWV3cy9pbmRleC5odG1sJykpO1xufSk7XG5cbmFwcC5nZXQoJy9hcGkvdjEnLCAocmVxLCByZXMpID0+IHJlcy5zdGF0dXMoMjAwKS5zZW5kKHtcbiAgXCJzdGF0dXNcIjogMjAwLFxuICBcIm1lc3NhZ2VcIjogJ1dlbGNvbWUgdG8gUE9MSVRJQ08nXG59KSk7XG4vLyBhZG1pbjogY3JlYXRlLCBlZGl0XG5hcHAucG9zdChcbiAgJy9hcGkvdjEvcGFydGllcycsIFxuICB0b2tlbi52ZXJpZnlUb2tlbiwgXG4gIHZlcmlmeUFkbWluLnZlcmlmeUlzQWRtaW4sIFxuICBwYXJ0eUN0ci5jcmVhdGVcbiAgKTtcblxuYXBwLnBhdGNoKFxuICAnL2FwaS92MS9wYXJ0aWVzLzppZC9uYW1lJywgXG4gIHRva2VuLnZlcmlmeVRva2VuLCBcbiAgdmVyaWZ5QWRtaW4udmVyaWZ5SXNBZG1pbiwgXG4gIHBhcnR5Q3RyLnVwZGF0ZVxuICApO1xuXG5hcHAuZGVsZXRlKFxuICAnL2FwaS92MS9wYXJ0aWVzLzppZCcsIFxuICB0b2tlbi52ZXJpZnlUb2tlbiwgXG4gIHZlcmlmeUFkbWluLnZlcmlmeUlzQWRtaW4sIFxuICBwYXJ0eUN0ci5kZWxldGVcbiAgKTtcblxuYXBwLnBvc3QoXG4gICcvYXBpL3YxL29mZmljZXMnLCBcbiAgdG9rZW4udmVyaWZ5VG9rZW4sIFxuICB2ZXJpZnlBZG1pbi52ZXJpZnlJc0FkbWluLCBcbiAgT2ZmaWNlLmNyZWF0ZVxuICApO1xuXG5hcHAucG9zdChcbiAgJy9hcGkvdjEvb2ZmaWNlLzp1c2VyaWQvcmVnaXN0ZXInLCBcbiAgdG9rZW4udmVyaWZ5VG9rZW4sIFxuICB2ZXJpZnlBZG1pbi52ZXJpZnlJc0FkbWluLCBcbiAgdmVyaWZ5SWQudmFsaWRhdGVVc2VySWQsIFxuICBjYW5kaWRhdGVDdHIucmVnaXN0ZXJcbiAgKTtcblxuICBhcHAuZ2V0KFxuICAgICcvYXBpL3YxL3VzZXJzJywgXG4gICAgdG9rZW4udmVyaWZ5VG9rZW4sIFxuICAgIHZlcmlmeUFkbWluLnZlcmlmeUlzQWRtaW4sIFxuICAgIHZlcmlmeUlkLnZhbGlkYXRlVXNlcklkLFxuICAgIHVzZXJDdHIuZ2V0QWxsVXNlcnNcbiAgICApO1xuXG5cbi8vIHVzZXJcbmFwcC5nZXQoXG4gICcvYXBpL3YxL3BhcnRpZXMnLCBcbiAgdG9rZW4udmVyaWZ5VG9rZW4sIFxuICBwYXJ0eUN0ci5nZXRQYXJ0aWVzXG4gICk7XG5cbmFwcC5nZXQoXG4gICcvYXBpL3YxL3BhcnRpZXMvOmlkJywgXG4gIHRva2VuLnZlcmlmeVRva2VuLCBcbiAgcGFydHlDdHIuZ2V0QVBhcnR5XG4gICk7XG5cbmFwcC5nZXQoXG4gICcvYXBpL3YxL29mZmljZXMnLCBcbiAgdG9rZW4udmVyaWZ5VG9rZW4sIFxuICBPZmZpY2UuZ2V0QWxsT2ZmaWNlc1xuICApO1xuXG5hcHAuZ2V0KFxuICAnL2FwaS92MS9vZmZpY2VzLzppZCcsIFxuICB0b2tlbi52ZXJpZnlUb2tlbiwgXG4gIE9mZmljZS5nZXRPbmVPZmZpY2VcbiAgKTtcblxuYXBwLnBvc3QoXG4gICcvYXBpL3YxL3ZvdGVzJywgXG4gIHRva2VuLnZlcmlmeVRva2VuLCBcbiAgdm90ZXNDdHIudm90ZXNcbiAgKTtcblxuYXBwLmdldChcbiAgJy9hcGkvdjEvb2ZmaWNlLzpvZmZpY2VpZC9yZXN1bHQnLCBcbiAgdG9rZW4udmVyaWZ5VG9rZW4sIFxuICBPZmZpY2Uub2ZmaWNlUmVzdWx0XG4gICk7XG5cbiAgYXBwLmdldChcbiAgICAnL2FwaS92MS9jYW5kaWRhdGVzJywgXG4gICAgdG9rZW4udmVyaWZ5VG9rZW4sIFxuICAgIGNhbmRpZGF0ZUN0ci5nZXRBbGxDYW5kaWRhdGVzXG4gICAgKTtcblxuLy8gdXNlciBsb2dpblxuYXBwLnBvc3QoXG4gICcvYXBpL3YxL2F1dGgvc2lnbnVwJywgXG4gIHVzZXJDdHIuY3JlYXRlVXNlclxuICApO1xuXG5hcHAucG9zdChcbiAgJy9hcGkvdjEvYXV0aC9sb2dpbicsIFxuICB1c2VyQ3RyLmxvZ2luXG4gICk7XG5cbiAgLy8gdXNlci9hZG1pbiBsb2dvdXRcbiAgYXBwLnBvc3QoXG4gICAgJy9hcGkvdjEvYXV0aC9zaWdub3V0JyxcbiAgICB0b2tlbi52ZXJpZnlUb2tlbixcbiAgICB1c2VyQ3RyLnNpZ25vdXRcbiAgKVxuXG5hcHAuZ2V0KCcvJywgKHJlcSwgcmVzKSA9PiByZXMuc3RhdHVzKDIwMCkuc2VuZCh7XG4gIFwic3RhdHVzXCI6IDIwMCxcbiAgXCJtZXNzYWdlXCI6ICdXZWxjb21lIHRvIFBPTElUSUNPJ1xufSkpO1xuXG4vLyBIYW5kbGUgNDA0OiBzZW5kIGFuIDQwNCBlcnJvciBwYWdlXG4vLyBhcHAudXNlKGZ1bmN0aW9uKHJlcSwgcmVzKSB7XG4vLyAgIHJlcy5zdGF0dXMoNDA0KS5zZW5kRmlsZShwYXRoLmpvaW4oX19kaXJuYW1lICsgJy4uLy4uL1VJL3ZpZXdzLzQwNC5odG1sJykpO1xuLy8gfSk7XG5cbi8vIEhhbmRsZSA1MDA6IHNlbmQgYSA1MDAgZXJyb3Jcbi8vIGFwcC51c2UoZnVuY3Rpb24oZXJyb3IsIHJlcSwgcmVzLCBuZXh0KSB7XG4vLyAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kRmlsZShwYXRoLmpvaW4oX19kaXJuYW1lICsgJy4uLy4uL1VJL3ZpZXdzLzUwMC5odG1sJykpO1xuLy8gfSk7XG5cbmFwcC5hbGwoJyonLCAocmVxLCByZXMpID0+e1xuICByZXMuc3RhdHVzKDQwNCkuc2VuZCh7XG4gICAgXCJzdGF0dXNcIjogNDA0LFxuICAgIFwiZXJyb3JcIjogXCJSZXNvdXJjZSBub3QgZm91bmQgb24gdGhlIHNlcnZlclwiIFxuICB9KVxufSlcblxuYXBwLmxpc3Rlbihwb3J0LCAoKSA9PiB7XG4gIGNvbnNvbGUubG9nKGBhcHAgaXMgcnVubmluZyBvbiBwb3J0ICR7cG9ydH1gKTtcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBhcHA7Il19