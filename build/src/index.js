'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _express = require('express');

var _express2 = _interopRequireDefault(_express);

var _cors = require('cors');

var _cors2 = _interopRequireDefault(_cors);

var _path = require('path');

var _path2 = _interopRequireDefault(_path);

var _bodyParser = require('body-parser');

var _bodyParser2 = _interopRequireDefault(_bodyParser);

var _officeCtr = require('./controllers/officeCtr');

var _officeCtr2 = _interopRequireDefault(_officeCtr);

var _userCtr = require('./controllers/userCtr');

var _userCtr2 = _interopRequireDefault(_userCtr);

var _partyCtr = require('./controllers/partyCtr');

var _partyCtr2 = _interopRequireDefault(_partyCtr);

var _candidatesCtr = require('./controllers/candidatesCtr');

var _candidatesCtr2 = _interopRequireDefault(_candidatesCtr);

var _interestCtr = require('./controllers/interestCtr');

var _interestCtr2 = _interopRequireDefault(_interestCtr);

var _votesCtr = require('./controllers/votesCtr');

var _votesCtr2 = _interopRequireDefault(_votesCtr);

var _tokenAuth = require('./helper/tokenAuth');

var _tokenAuth2 = _interopRequireDefault(_tokenAuth);

var _verifyAdmin = require('./helper/verifyAdmin');

var _verifyAdmin2 = _interopRequireDefault(_verifyAdmin);

var _userAuth = require('./helper/userAuth');

var _userAuth2 = _interopRequireDefault(_userAuth);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var app = (0, _express2.default)(); // import { json, urlencoded } from 'body-parser';


app.use((0, _cors2.default)());

app.use('*', function (req, res, next) {
  res.header('Access-Control-Allow-Origin', '*');
  res.header('Access-Control-Allow-Methods', 'PUT, GET, POST, DELETE, OPTIONS');
  res.header('Access-Control-Allow-Headers', 'Content-Type');
  next();
});

app.use(_express2.default.static(_path2.default.join(__dirname)));
app.use('/styles', _express2.default.static(__dirname + '../../UI/styles'));
app.use('/images', _express2.default.static(__dirname + '../../UI/images'));
app.use('/scripts', _express2.default.static(__dirname + '../../UI/scripts'));
app.use('/views', _express2.default.static(__dirname + '../../UI/views'));

app.use(_bodyParser2.default.json());
app.use(_bodyParser2.default.urlencoded({
  extended: true
}));

app.use(_express2.default.json());
var port = process.env.PORT || 5000;

// homepage
app.get('/', function (req, res) {
  res.sendFile(_path2.default.join(__dirname + '../../UI/views/index.html'));
});

app.get('/api/v1', function (req, res) {
  return res.status(200).send({
    status: 200,
    message: 'Welcome to POLITICO'
  });
});
// admin: create, edit
app.post('/api/v1/parties', _tokenAuth2.default.verifyToken, _verifyAdmin2.default.verifyIsAdmin, _partyCtr2.default.create);

app.patch('/api/v1/parties/:id/name', _tokenAuth2.default.verifyToken, _verifyAdmin2.default.verifyIsAdmin, _partyCtr2.default.update);

app.delete('/api/v1/parties/:id', _tokenAuth2.default.verifyToken, _verifyAdmin2.default.verifyIsAdmin, _partyCtr2.default.delete);

app.post('/api/v1/offices', _tokenAuth2.default.verifyToken, _verifyAdmin2.default.verifyIsAdmin, _officeCtr2.default.create);

app.post('/api/v1/office/:userid/register', _tokenAuth2.default.verifyToken, _verifyAdmin2.default.verifyIsAdmin, _userAuth2.default.validateUserId, _candidatesCtr2.default.register);

app.post('/api/v1/office/interest', _tokenAuth2.default.verifyToken, _interestCtr2.default.userInterest);

app.get('/api/v1/users', _tokenAuth2.default.verifyToken, _verifyAdmin2.default.verifyIsAdmin, _userAuth2.default.validateUserId, _userCtr2.default.getAllUsers);

app.get('/api/v1/:id/users', _tokenAuth2.default.verifyToken, _verifyAdmin2.default.verifyIsAdmin, _userAuth2.default.validateUserId, _userCtr2.default.getAUser);

// user
app.get('/api/v1/parties', _partyCtr2.default.getParties);

app.get('/api/v1/parties/:id', _partyCtr2.default.getAParty);

app.get('/api/v1/offices', _tokenAuth2.default.verifyToken, _officeCtr2.default.getAllOffices);

app.get('/api/v1/offices/:id', _tokenAuth2.default.verifyToken, _officeCtr2.default.getOneOffice);

app.post('/api/v1/votes', _tokenAuth2.default.verifyToken, _votesCtr2.default.votes);

app.get('/api/v1/office/:officeid/result', _tokenAuth2.default.verifyToken, _officeCtr2.default.officeResult);

app.get('/api/v1/candidates', _tokenAuth2.default.verifyToken, _candidatesCtr2.default.getAllCandidates);

// user login
app.post('/api/v1/auth/signup', _userCtr2.default.createUser);

app.post('/api/v1/auth/login', _userCtr2.default.login);

// user/admin logout
app.post('/api/v1/auth/signout', _tokenAuth2.default.verifyToken, _userCtr2.default.signout);

app.get('/', function (req, res) {
  return res.status(200).send({
    status: 200,
    message: 'Welcome to POLITICO'
  });
});

// Handle 404: send an 404 error page
// app.use(function(req, res) {
//   res.status(404).sendFile(path.join(__dirname + '../../UI/views/404.html'));
// });

// Handle 500: send a 500 error
// app.use(function(error, req, res, next) {
//   res.status(500).sendFile(path.join(__dirname + '../../UI/views/500.html'));
// });

app.all('*', function (req, res) {
  res.status(404).send({
    status: 404,
    error: 'Resource not found on the server'
  });
});

app.listen(port, function () {
  console.log('app is running on port ' + port);
});

exports.default = app;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9pbmRleC5qcyJdLCJuYW1lcyI6WyJhcHAiLCJ1c2UiLCJyZXEiLCJyZXMiLCJuZXh0IiwiaGVhZGVyIiwiZXhwcmVzcyIsInN0YXRpYyIsInBhdGgiLCJqb2luIiwiX19kaXJuYW1lIiwiYm9keVBhcnNlciIsImpzb24iLCJ1cmxlbmNvZGVkIiwiZXh0ZW5kZWQiLCJwb3J0IiwicHJvY2VzcyIsImVudiIsIlBPUlQiLCJnZXQiLCJzZW5kRmlsZSIsInN0YXR1cyIsInNlbmQiLCJtZXNzYWdlIiwicG9zdCIsInRva2VuIiwidmVyaWZ5VG9rZW4iLCJ2ZXJpZnlBZG1pbiIsInZlcmlmeUlzQWRtaW4iLCJwYXJ0eUN0ciIsImNyZWF0ZSIsInBhdGNoIiwidXBkYXRlIiwiZGVsZXRlIiwiT2ZmaWNlIiwidmVyaWZ5SWQiLCJ2YWxpZGF0ZVVzZXJJZCIsImNhbmRpZGF0ZUN0ciIsInJlZ2lzdGVyIiwiaW50ZXJlc3RDdHIiLCJ1c2VySW50ZXJlc3QiLCJ1c2VyQ3RyIiwiZ2V0QWxsVXNlcnMiLCJnZXRBVXNlciIsImdldFBhcnRpZXMiLCJnZXRBUGFydHkiLCJnZXRBbGxPZmZpY2VzIiwiZ2V0T25lT2ZmaWNlIiwidm90ZXNDdHIiLCJ2b3RlcyIsIm9mZmljZVJlc3VsdCIsImdldEFsbENhbmRpZGF0ZXMiLCJjcmVhdGVVc2VyIiwibG9naW4iLCJzaWdub3V0IiwiYWxsIiwiZXJyb3IiLCJsaXN0ZW4iLCJjb25zb2xlIiwibG9nIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7Ozs7O0FBR0EsSUFBTUEsTUFBTSx3QkFBWixDLENBaEJBOzs7QUFtQkFBLElBQUlDLEdBQUosQ0FBUSxxQkFBUjs7QUFFQUQsSUFBSUMsR0FBSixDQUFRLEdBQVIsRUFBYSxVQUFDQyxHQUFELEVB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QjtBQUlELENBTEQ7O0FBT0F4RCxJQUFJeUQsTUFBSixDQUFXMUMsSUFBWCxFQUFpQixZQUFNO0FBQ3JCMkMsVUFBUUMsR0FBUiw2QkFBc0M1QyxJQUF0QztBQUNELENBRkQ7O2tCQUllZixHIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gaW1wb3J0IHsganNvbiwgdXJsZW5jb2RlZCB9IGZyb20gJ2JvZHktcGFyc2VyJztcbmltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IGNvcnMgZnJvbSAnY29ycyc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCBib2R5UGFyc2VyIGZyb20gJ2JvZHktcGFyc2VyJztcbmltcG9ydCBPZmZpY2UgZnJvbSAnLi9jb250cm9sbGVycy9vZmZpY2VDdHInO1xuaW1wb3J0IHVzZXJDdHIgZnJvbSAnLi9jb250cm9sbGVycy91c2VyQ3RyJztcbmltcG9ydCBwYXJ0eUN0ciBmcm9tICcuL2NvbnRyb2xsZXJzL3BhcnR5Q3RyJztcbmltcG9ydCBjYW5kaWRhdGVDdHIgZnJvbSAnLi9jb250cm9sbGVycy9jYW5kaWRhdGVzQ3RyJztcbmltcG9ydCBpbnRlcmVzdEN0ciBmcm9tICcuL2NvbnRyb2xsZXJzL2ludGVyZXN0Q3RyJztcbmltcG9ydCB2b3Rlc0N0ciBmcm9tICcuL2NvbnRyb2xsZXJzL3ZvdGVzQ3RyJztcbmltcG9ydCB0b2tlbiBmcm9tICcuL2hlbHBlci90b2tlbkF1dGgnO1xuaW1wb3J0IHZlcmlmeUFkbWluIGZyb20gJy4vaGVscGVyL3ZlcmlmeUFkbWluJztcbmltcG9ydCB2ZXJpZnlJZCBmcm9tICcuL2hlbHBlci91c2VyQXV0aCc7XG5cblxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xuXG5cbmFwcC51c2UoY29ycygpKTtcblxuYXBwLnVzZSgnKicsIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nLCAnKicpO1xuICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzJywgJ1BVVCwgR0VULCBQT1NULCBERUxFVEUsIE9QVElPTlMnKTtcbiAgcmVzLmhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctSGVhZGVycycsICdDb250ZW50LVR5cGUnKTtcbiAgbmV4dCgpO1xufSk7XG5cbmFwcC51c2UoZXhwcmVzcy5zdGF0aWMocGF0aC5qb2luKF9fZGlybmFtZSkpKTtcbmFwcC51c2UoJy9zdHlsZXMnLCBleHByZXNzLnN0YXRpYyhgJHtfX2Rpcm5hbWV9Li4vLi4vVUkvc3R5bGVzYCkpO1xuYXBwLnVzZSgnL2ltYWdlcycsIGV4cHJlc3Muc3RhdGljKGAke19fZGlybmFtZX0uLi8uLi9VSS9pbWFnZXNgKSk7XG5hcHAudXNlKCcvc2NyaXB0cycsIGV4cHJlc3Muc3RhdGljKGAke19fZGlybmFtZX0uLi8uLi9VSS9zY3JpcHRzYCkpO1xuYXBwLnVzZSgnL3ZpZXdzJywgZXhwcmVzcy5zdGF0aWMoYCR7X19kaXJuYW1lfS4uLy4uL1VJL3ZpZXdzYCkpO1xuXG5cbmFwcC51c2UoYm9keVBhcnNlci5qc29uKCkpO1xuYXBwLnVzZShib2R5UGFyc2VyLnVybGVuY29kZWQoe1xuICBleHRlbmRlZDogdHJ1ZSxcbn0pKTtcblxuYXBwLnVzZShleHByZXNzLmpzb24oKSk7XG5jb25zdCBwb3J0ID0gcHJvY2Vzcy5lbnYuUE9SVCB8fCA1MDAwO1xuXG4vLyBob21lcGFnZVxuYXBwLmdldCgnLycsIChyZXEsIHJlcykgPT4ge1xuICByZXMuc2VuZEZpbGUocGF0aC5qb2luKGAke19fZGlybmFtZX0uLi8uLi9VSS92aWV3cy9pbmRleC5odG1sYCkpO1xufSk7XG5cbmFwcC5nZXQoJy9hcGkvdjEnLCAocmVxLCByZXMpID0+IHJlcy5zdGF0dXMoMjAwKS5zZW5kKHtcbiAgc3RhdHVzOiAyMDAsXG4gIG1lc3NhZ2U6ICdXZWxjb21lIHRvIFBPTElUSUNPJyxcbn0pKTtcbi8vIGFkbWluOiBjcmVhdGUsIGVkaXRcbmFwcC5wb3N0KFxuICAnL2FwaS92MS9wYXJ0aWVzJyxcbiAgdG9rZW4udmVyaWZ5VG9rZW4sXG4gIHZlcmlmeUFkbWluLnZlcmlmeUlzQWRtaW4sXG4gIHBhcnR5Q3RyLmNyZWF0ZSxcbik7XG5cbmFwcC5wYXRjaChcbiAgJy9hcGkvdjEvcGFydGllcy86aWQvbmFtZScsXG4gIHRva2VuLnZlcmlmeVRva2VuLFxuICB2ZXJpZnlBZG1pbi52ZXJpZnlJc0FkbWluLFxuICBwYXJ0eUN0ci51cGRhdGUsXG4pO1xuXG5hcHAuZGVsZXRlKFxuICAnL2FwaS92MS9wYXJ0aWVzLzppZCcsXG4gIHRva2VuLnZlcmlmeVRva2VuLFxuICB2ZXJpZnlBZG1pbi52ZXJpZnlJc0FkbWluLFxuICBwYXJ0eUN0ci5kZWxldGUsXG4pO1xuXG5hcHAucG9zdChcbiAgJy9hcGkvdjEvb2ZmaWNlcycsXG4gIHRva2VuLnZlcmlmeVRva2VuLFxuICB2ZXJpZnlBZG1pbi52ZXJpZnlJc0FkbWluLFxuICBPZmZpY2UuY3JlYXRlLFxuKTtcblxuYXBwLnBvc3QoXG4gICcvYXBpL3YxL29mZmljZS86dXNlcmlkL3JlZ2lzdGVyJyxcbiAgdG9rZW4udmVyaWZ5VG9rZW4sXG4gIHZlcmlmeUFkbWluLnZlcmlmeUlzQWRtaW4sXG4gIHZlcmlmeUlkLnZhbGlkYXRlVXNlcklkLFxuICBjYW5kaWRhdGVDdHIucmVnaXN0ZXIsXG4pO1xuXG5hcHAucG9zdChcbiAgJy9hcGkvdjEvb2ZmaWNlL2ludGVyZXN0JyxcbiAgdG9rZW4udmVyaWZ5VG9rZW4sXG4gIGludGVyZXN0Q3RyLnVzZXJJbnRlcmVzdCxcbik7XG5cbmFwcC5nZXQoXG4gICcvYXBpL3YxL3VzZXJzJyxcbiAgdG9rZW4udmVyaWZ5VG9rZW4sXG4gIHZlcmlmeUFkbWluLnZlcmlmeUlzQWRtaW4sXG4gIHZlcmlmeUlkLnZhbGlkYXRlVXNlcklkLFxuICB1c2VyQ3RyLmdldEFsbFVzZXJzLFxuKTtcblxuYXBwLmdldChcbiAgJy9hcGkvdjEvOmlkL3VzZXJzJyxcbiAgdG9rZW4udmVyaWZ5VG9rZW4sXG4gIHZlcmlmeUFkbWluLnZlcmlmeUlzQWRtaW4sXG4gIHZlcmlmeUlkLnZhbGlkYXRlVXNlcklkLFxuICB1c2VyQ3RyLmdldEFVc2VyLFxuKTtcblxuXG4vLyB1c2VyXG5hcHAuZ2V0KFxuICAnL2FwaS92MS9wYXJ0aWVzJyxcbiAgcGFydHlDdHIuZ2V0UGFydGllcyxcbik7XG5cbmFwcC5nZXQoXG4gICcvYXBpL3YxL3BhcnRpZXMvOmlkJyxcbiAgcGFydHlDdHIuZ2V0QVBhcnR5LFxuKTtcblxuYXBwLmdldChcbiAgJy9hcGkvdjEvb2ZmaWNlcycsXG4gIHRva2VuLnZlcmlmeVRva2VuLFxuICBPZmZpY2UuZ2V0QWxsT2ZmaWNlcyxcbik7XG5cbmFwcC5nZXQoXG4gICcvYXBpL3YxL29mZmljZXMvOmlkJyxcbiAgdG9rZW4udmVyaWZ5VG9rZW4sXG4gIE9mZmljZS5nZXRPbmVPZmZpY2UsXG4pO1xuXG5hcHAucG9zdChcbiAgJy9hcGkvdjEvdm90ZXMnLFxuICB0b2tlbi52ZXJpZnlUb2tlbixcbiAgdm90ZXNDdHIudm90ZXMsXG4pO1xuXG5hcHAuZ2V0KFxuICAnL2FwaS92MS9vZmZpY2UvOm9mZmljZWlkL3Jlc3VsdCcsXG4gIHRva2VuLnZlcmlmeVRva2VuLFxuICBPZmZpY2Uub2ZmaWNlUmVzdWx0LFxuKTtcblxuYXBwLmdldChcbiAgJy9hcGkvdjEvY2FuZGlkYXRlcycsXG4gIHRva2VuLnZlcmlmeVRva2VuLFxuICBjYW5kaWRhdGVDdHIuZ2V0QWxsQ2FuZGlkYXRlcyxcbik7XG5cbi8vIHVzZXIgbG9naW5cbmFwcC5wb3N0KFxuICAnL2FwaS92MS9hdXRoL3NpZ251cCcsXG4gIHVzZXJDdHIuY3JlYXRlVXNlcixcbik7XG5cbmFwcC5wb3N0KFxuICAnL2FwaS92MS9hdXRoL2xvZ2luJyxcbiAgdXNlckN0ci5sb2dpbixcbik7XG5cbi8vIHVzZXIvYWRtaW4gbG9nb3V0XG5hcHAucG9zdChcbiAgJy9hcGkvdjEvYXV0aC9zaWdub3V0JyxcbiAgdG9rZW4udmVyaWZ5VG9rZW4sXG4gIHVzZXJDdHIuc2lnbm91dCxcbik7XG5cbmFwcC5nZXQoJy8nLCAocmVxLCByZXMpID0+IHJlcy5zdGF0dXMoMjAwKS5zZW5kKHtcbiAgc3RhdHVzOiAyMDAsXG4gIG1lc3NhZ2U6ICdXZWxjb21lIHRvIFBPTElUSUNPJyxcbn0pKTtcblxuLy8gSGFuZGxlIDQwNDogc2VuZCBhbiA0MDQgZXJyb3IgcGFnZVxuLy8gYXBwLnVzZShmdW5jdGlvbihyZXEsIHJlcykge1xuLy8gICByZXMuc3RhdHVzKDQwNCkuc2VuZEZpbGUocGF0aC5qb2luKF9fZGlybmFtZSArICcuLi8uLi9VSS92aWV3cy80MDQuaHRtbCcpKTtcbi8vIH0pO1xuXG4vLyBIYW5kbGUgNTAwOiBzZW5kIGEgNTAwIGVycm9yXG4vLyBhcHAudXNlKGZ1bmN0aW9uKGVycm9yLCByZXEsIHJlcywgbmV4dCkge1xuLy8gICByZXMuc3RhdHVzKDUwMCkuc2VuZEZpbGUocGF0aC5qb2luKF9fZGlybmFtZSArICcuLi8uLi9VSS92aWV3cy81MDAuaHRtbCcpKTtcbi8vIH0pO1xuXG5hcHAuYWxsKCcqJywgKHJlcSwgcmVzKSA9PiB7XG4gIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHtcbiAgICBzdGF0dXM6IDQwNCxcbiAgICBlcnJvcjogJ1Jlc291cmNlIG5vdCBmb3VuZCBvbiB0aGUgc2VydmVyJyxcbiAgfSk7XG59KTtcblxuYXBwLmxpc3Rlbihwb3J0LCAoKSA9PiB7XG4gIGNvbnNvbGUubG9nKGBhcHAgaXMgcnVubmluZyBvbiBwb3J0ICR7cG9ydH1gKTtcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBhcHA7XG4iXX0=