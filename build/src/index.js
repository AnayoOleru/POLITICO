'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _express = require('express');

var _express2 = _interopRequireDefault(_express);

var _officeCtr = require('./controllers/officeCtr');

var _officeCtr2 = _interopRequireDefault(_officeCtr);

var _userCtr = require('./controllers/userCtr');

var _userCtr2 = _interopRequireDefault(_userCtr);

var _partyCtr = require('./controllers/partyCtr');

var _partyCtr2 = _interopRequireDefault(_partyCtr);

var _candidatesCtr = require('./controllers/candidatesCtr');

var _candidatesCtr2 = _interopRequireDefault(_candidatesCtr);

var _votesCtr = require('./controllers/votesCtr');

var _votesCtr2 = _interopRequireDefault(_votesCtr);

var _tokenAuth = require('./helper/tokenAuth');

var _tokenAuth2 = _interopRequireDefault(_tokenAuth);

var _verifyAdmin = require('./helper/verifyAdmin');

var _verifyAdmin2 = _interopRequireDefault(_verifyAdmin);

var _userAuth = require('./helper/userAuth');

var _userAuth2 = _interopRequireDefault(_userAuth);

var _path = require('path');

var _path2 = _interopRequireDefault(_path);

var _bodyParser = require('body-parser');

var _bodyParser2 = _interopRequireDefault(_bodyParser);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var app = (0, _express2.default)(); // import { json, urlencoded } from 'body-parser';


app.use('*', function (req, res, next) {
  res.header('Access-Control-Allow-Origin', '*');
  res.header('Access-Control-Allow-Methods', 'PUT, GET, POST, DELETE, OPTIONS');
  res.header('Access-Control-Allow-Headers', 'Content-Type');
  next();
});

app.use(_express2.default.static(_path2.default.join(__dirname)));
app.use("/styles", _express2.default.static(__dirname + '../../UI/styles'));
app.use("/images", _express2.default.static(__dirname + '../../UI/images'));
app.use("/scripts", _express2.default.static(__dirname + '../../UI/scripts'));
app.use("/views", _express2.default.static(__dirname + '../../UI/views'));

app.use(_bodyParser2.default.json());
app.use(_bodyParser2.default.urlencoded({
  extended: true
}));

app.use(_express2.default.json());
var port = process.env.PORT || 3000;

// homepage
app.get('/', function (req, res) {
  res.sendFile(_path2.default.join(__dirname + '../../UI/views/index.html'));
});

app.get('/api/v1', function (req, res) {
  return res.status(200).send({
    "status": 200,
    "message": 'Welcome to POLITICO'
  });
});
// admin: create, edit
app.post('/api/v1/parties', _tokenAuth2.default.verifyToken, _verifyAdmin2.default.verifyIsAdmin, _partyCtr2.default.create);

app.patch('/api/v1/parties/:id/name', _tokenAuth2.default.verifyToken, _verifyAdmin2.default.verifyIsAdmin, _partyCtr2.default.update);

app.delete('/api/v1/parties/:id', _tokenAuth2.default.verifyToken, _verifyAdmin2.default.verifyIsAdmin, _partyCtr2.default.delete);

app.post('/api/v1/offices', _tokenAuth2.default.verifyToken, _verifyAdmin2.default.verifyIsAdmin, _officeCtr2.default.create);

app.post('/api/v1/office/:userid/register', _tokenAuth2.default.verifyToken, _verifyAdmin2.default.verifyIsAdmin, _userAuth2.default.validateUserId, _candidatesCtr2.default.register);

app.get('/api/v1/users', _tokenAuth2.default.verifyToken, _verifyAdmin2.default.verifyIsAdmin, _userAuth2.default.validateUserId, _userCtr2.default.getAllUsers);

// user
app.get('/api/v1/parties', _tokenAuth2.default.verifyToken, _partyCtr2.default.getParties);

app.get('/api/v1/parties/:id', _tokenAuth2.default.verifyToken, _partyCtr2.default.getAParty);

app.get('/api/v1/offices', _tokenAuth2.default.verifyToken, _officeCtr2.default.getAllOffices);

app.get('/api/v1/offices/:id', _tokenAuth2.default.verifyToken, _officeCtr2.default.getOneOffice);

app.post('/api/v1/votes', _tokenAuth2.default.verifyToken, _votesCtr2.default.votes);

app.get('/api/v1/office/:officeid/result', _tokenAuth2.default.verifyToken, _officeCtr2.default.officeResult);

app.get('/api/v1/candidates', _tokenAuth2.default.verifyToken, _candidatesCtr2.default.getAllCandidates);

// user login
app.post('/api/v1/auth/signup', _userCtr2.default.createUser);

app.post('/api/v1/auth/login', _userCtr2.default.login);

// user/admin logout
app.post('/api/v1/auth/signout', _tokenAuth2.default.verifyToken, _userCtr2.default.signout);

app.get('/', function (req, res) {
  return res.status(200).send({
    "status": 200,
    "message": 'Welcome to POLITICO'
  });
});

// Handle 404: send an 404 error page
// app.use(function(req, res) {
//   res.status(404).sendFile(path.join(__dirname + '../../UI/views/404.html'));
// });

// Handle 500: send a 500 error
// app.use(function(error, req, res, next) {
//   res.status(500).sendFile(path.join(__dirname + '../../UI/views/500.html'));
// });

app.all('*', function (req, res) {
  res.status(404).send({
    "status": 404,
    "error": "Resource not found on the server"
  });
});

app.listen(port, function () {
  console.log('app is running on port ' + port);
});

exports.default = app;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9pbmRleC5qcyJdLCJuYW1lcyI6WyJhcHAiLCJ1c2UiLCJyZXEiLCJyZXMiLCJuZXh0IiwiaGVhZGVyIiwiZXhwcmVzcyIsInN0YXRpYyIsInBhdGgiLCJqb2luIiwiX19kaXJuYW1lIiwiYm9keVBhcnNlciIsImpzb24iLCJ1cmxlbmNvZGVkIiwiZXh0ZW5kZWQiLCJwb3J0IiwicHJvY2VzcyIsImVudiIsIlBPUlQiLCJnZXQiLCJzZW5kRmlsZSIsInN0YXR1cyIsInNlbmQiLCJwb3N0IiwidG9rZW4iLCJ2ZXJpZnlUb2tlbiIsInZlcmlmeUFkbWluIiwidmVyaWZ5SXNBZG1pbiIsInBhcnR5Q3RyIiwiY3JlYXRlIiwicGF0Y2giLCJ1cGRhdGUiLCJkZWxldGUiLCJPZmZpY2UiLCJ2ZXJpZnlJZCIsInZhbGlkYXRlVXNlcklkIiwiY2FuZGlkYXRlQ3RyIiwicmVnaXN0ZXIiLCJ1c2VyQ3RyIiwiZ2V0QWxsVXNlcnMiLCJnZXRQYXJ0aWVzIiwiZ2V0QVBhcnR5IiwiZ2V0QWxsT2ZmaWNlcyIsImdldE9uZU9mZmljZSIsInZvdGVzQ3RyIiwidm90ZXMiLCJvZmZpY2VSZXN1bHQiLCJnZXRBbGxDYW5kaWRhdGVzIiwiY3JlYXRlVXNlciIsImxvZ2luIiwic2lnbm91dCIsImFsbCIsImxpc3RlbiIsImNvbnNvbGUiLCJsb2ciXSwibWFwcGluZ3MiOiI7Ozs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUVBOzs7O0FBQ0E7Ozs7OztBQUdBLElBQU1BLE1BQU0sd0JBQVosQyxDQWZBOzs7QUFpQkFBLElBQUlDLEdBQUosQ0FBUSxHQUFSLEVBQWEsVUFBQ0MsR0FBRCxFQUFNQyxHQUFOLEVBQVdDLElBQVgsRUFBb0I7QUFDL0JELE1BQUlFLE1BQUosQ0FBVyw2QkFBWCxFQUEwQyxHQUExQztBQUNBRixNQUFJRSxNQUFKLENBQVcsOEJBQVgsRUFBMkMsaUNB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QUFTQyxLQUhYOztBQU1BN0MsSUFBSW1CLEdBQUosQ0FDRSxpQ0FERixFQUVFSyxvQkFBTUMsV0FGUixFQUdFUSxvQkFBT2EsWUFIVDs7QUFNRTlDLElBQUltQixHQUFKLENBQ0Usb0JBREYsRUFFRUssb0JBQU1DLFdBRlIsRUFHRVcsd0JBQWFXLGdCQUhmOztBQU1GO0FBQ0EvQyxJQUFJdUIsSUFBSixDQUNFLHFCQURGLEVBRUVlLGtCQUFRVSxVQUZWOztBQUtBaEQsSUFBSXVCLElBQUosQ0FDRSxvQkFERixFQUVFZSxrQkFBUVcsS0FGVjs7QUFLRTtBQUNBakQsSUFBSXVCLElBQUosQ0FDRSxzQkFERixFQUVFQyxvQkFBTUMsV0FGUixFQUdFYSxrQkFBUVksT0FIVjs7QUFNRmxELElBQUltQixHQUFKLENBQVEsR0FBUixFQUFhLFVBQUNqQixHQUFELEVBQU1DLEdBQU47QUFBQSxTQUFjQSxJQUFJa0IsTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO0FBQzlDLGNBQVUsR0FEb0M7QUFFOUMsZUFBVztBQUZtQyxHQUFyQixDQUFkO0FBQUEsQ0FBYjs7QUFLQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQXRCLElBQUltRCxHQUFKLENBQVEsR0FBUixFQUFhLFVBQUNqRCxHQUFELEVBQU1DLEdBQU4sRUFBYTtBQUN4QkEsTUFBSWtCLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQjtBQUNuQixjQUFVLEdBRFM7QUFFbkIsYUFBUztBQUZVLEdBQXJCO0FBSUQsQ0FMRDs7QUFPQXRCLElBQUlvRCxNQUFKLENBQVdyQyxJQUFYLEVBQWlCLFlBQU07QUFDckJzQyxVQUFRQyxHQUFSLDZCQUFzQ3ZDLElBQXRDO0FBQ0QsQ0FGRDs7a0JBSWVmLEciLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBpbXBvcnQgeyBqc29uLCB1cmxlbmNvZGVkIH0gZnJvbSAnYm9keS1wYXJzZXInO1xuaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgT2ZmaWNlIGZyb20gJy4vY29udHJvbGxlcnMvb2ZmaWNlQ3RyJztcbmltcG9ydCB1c2VyQ3RyIGZyb20gJy4vY29udHJvbGxlcnMvdXNlckN0cic7XG5pbXBvcnQgcGFydHlDdHIgZnJvbSAnLi9jb250cm9sbGVycy9wYXJ0eUN0cic7XG5pbXBvcnQgY2FuZGlkYXRlQ3RyIGZyb20gJy4vY29udHJvbGxlcnMvY2FuZGlkYXRlc0N0cic7XG5pbXBvcnQgdm90ZXNDdHIgZnJvbSAnLi9jb250cm9sbGVycy92b3Rlc0N0cic7XG5pbXBvcnQgdG9rZW4gZnJvbSAnLi9oZWxwZXIvdG9rZW5BdXRoJztcbmltcG9ydCB2ZXJpZnlBZG1pbiBmcm9tICcuL2hlbHBlci92ZXJpZnlBZG1pbic7XG5pbXBvcnQgdmVyaWZ5SWQgZnJvbSAnLi9oZWxwZXIvdXNlckF1dGgnO1xuXG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCBib2R5UGFyc2VyIGZyb20gJ2JvZHktcGFyc2VyJztcblxuXG5jb25zdCBhcHAgPSBleHByZXNzKCk7XG5cbmFwcC51c2UoJyonLCAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgcmVzLmhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJywgJyonKTtcbiAgcmVzLmhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kcycsICdQVVQsIEdFVCwgUE9TVCwgREVMRVRFLCBPUFRJT05TJyk7XG4gIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnMnLCAnQ29udGVudC1UeXBlJyk7XG4gIG5leHQoKTtcbn0pO1xuXG5hcHAudXNlKGV4cHJlc3Muc3RhdGljKHBhdGguam9pbihfX2Rpcm5hbWUpKSk7XG5hcHAudXNlKFwiL3N0eWxlc1wiLCBleHByZXNzLnN0YXRpYyhfX2Rpcm5hbWUgKyAnLi4vLi4vVUkvc3R5bGVzJykpO1xuYXBwLnVzZShcIi9pbWFnZXNcIiwgZXhwcmVzcy5zdGF0aWMoX19kaXJuYW1lICsgJy4uLy4uL1VJL2ltYWdlcycpKTtcbmFwcC51c2UoXCIvc2NyaXB0c1wiLCBleHByZXNzLnN0YXRpYyhfX2Rpcm5hbWUgKyAnLi4vLi4vVUkvc2NyaXB0cycpKTtcbmFwcC51c2UoXCIvdmlld3NcIiwgZXhwcmVzcy5zdGF0aWMoX19kaXJuYW1lICsgJy4uLy4uL1VJL3ZpZXdzJykpO1xuXG5cbmFwcC51c2UoYm9keVBhcnNlci5qc29uKCkpO1xuYXBwLnVzZShib2R5UGFyc2VyLnVybGVuY29kZWQoe1xuICBleHRlbmRlZDogdHJ1ZVxufSkpO1xuXG5hcHAudXNlKGV4cHJlc3MuanNvbigpKVxuY29uc3QgcG9ydCA9IHByb2Nlc3MuZW52LlBPUlQgfHwgMzAwMDtcblxuLy8gaG9tZXBhZ2VcbmFwcC5nZXQoJy8nLCBmdW5jdGlvbiAocmVxLCByZXMpIHtcbiAgcmVzLnNlbmRGaWxlKHBhdGguam9pbihfX2Rpcm5hbWUgKyAnLi4vLi4vVUkvdmlld3MvaW5kZXguaHRtbCcpKTtcbn0pO1xuXG5hcHAuZ2V0KCcvYXBpL3YxJywgKHJlcSwgcmVzKSA9PiByZXMuc3RhdHVzKDIwMCkuc2VuZCh7XG4gIFwic3RhdHVzXCI6IDIwMCxcbiAgXCJtZXNzYWdlXCI6ICdXZWxjb21lIHRvIFBPTElUSUNPJ1xufSkpO1xuLy8gYWRtaW46IGNyZWF0ZSwgZWRpdFxuYXBwLnBvc3QoXG4gICcvYXBpL3YxL3BhcnRpZXMnLCBcbiAgdG9rZW4udmVyaWZ5VG9rZW4sIFxuICB2ZXJpZnlBZG1pbi52ZXJpZnlJc0FkbWluLCBcbiAgcGFydHlDdHIuY3JlYXRlXG4gICk7XG5cbmFwcC5wYXRjaChcbiAgJy9hcGkvdjEvcGFydGllcy86aWQvbmFtZScsIFxuICB0b2tlbi52ZXJpZnlUb2tlbiwgXG4gIHZlcmlmeUFkbWluLnZlcmlmeUlzQWRtaW4sIFxuICBwYXJ0eUN0ci51cGRhdGVcbiAgKTtcblxuYXBwLmRlbGV0ZShcbiAgJy9hcGkvdjEvcGFydGllcy86aWQnLCBcbiAgdG9rZW4udmVyaWZ5VG9rZW4sIFxuICB2ZXJpZnlBZG1pbi52ZXJpZnlJc0FkbWluLCBcbiAgcGFydHlDdHIuZGVsZXRlXG4gICk7XG5cbmFwcC5wb3N0KFxuICAnL2FwaS92MS9vZmZpY2VzJywgXG4gIHRva2VuLnZlcmlmeVRva2VuLCBcbiAgdmVyaWZ5QWRtaW4udmVyaWZ5SXNBZG1pbiwgXG4gIE9mZmljZS5jcmVhdGVcbiAgKTtcblxuYXBwLnBvc3QoXG4gICcvYXBpL3YxL29mZmljZS86dXNlcmlkL3JlZ2lzdGVyJywgXG4gIHRva2VuLnZlcmlmeVRva2VuLCBcbiAgdmVyaWZ5QWRtaW4udmVyaWZ5SXNBZG1pbiwgXG4gIHZlcmlmeUlkLnZhbGlkYXRlVXNlcklkLCBcbiAgY2FuZGlkYXRlQ3RyLnJlZ2lzdGVyXG4gICk7XG5cbiAgYXBwLmdldChcbiAgICAnL2FwaS92MS91c2VycycsIFxuICAgIHRva2VuLnZlcmlmeVRva2VuLCBcbiAgICB2ZXJpZnlBZG1pbi52ZXJpZnlJc0FkbWluLCBcbiAgICB2ZXJpZnlJZC52YWxpZGF0ZVVzZXJJZCxcbiAgICB1c2VyQ3RyLmdldEFsbFVzZXJzXG4gICAgKTtcblxuXG4vLyB1c2VyXG5hcHAuZ2V0KFxuICAnL2FwaS92MS9wYXJ0aWVzJywgXG4gIHRva2VuLnZlcmlmeVRva2VuLCBcbiAgcGFydHlDdHIuZ2V0UGFydGllc1xuICApO1xuXG5hcHAuZ2V0KFxuICAnL2FwaS92MS9wYXJ0aWVzLzppZCcsIFxuICB0b2tlbi52ZXJpZnlUb2tlbiwgXG4gIHBhcnR5Q3RyLmdldEFQYXJ0eVxuICApO1xuXG5hcHAuZ2V0KFxuICAnL2FwaS92MS9vZmZpY2VzJywgXG4gIHRva2VuLnZlcmlmeVRva2VuLCBcbiAgT2ZmaWNlLmdldEFsbE9mZmljZXNcbiAgKTtcblxuYXBwLmdldChcbiAgJy9hcGkvdjEvb2ZmaWNlcy86aWQnLCBcbiAgdG9rZW4udmVyaWZ5VG9rZW4sIFxuICBPZmZpY2UuZ2V0T25lT2ZmaWNlXG4gICk7XG5cbmFwcC5wb3N0KFxuICAnL2FwaS92MS92b3RlcycsIFxuICB0b2tlbi52ZXJpZnlUb2tlbiwgXG4gIHZvdGVzQ3RyLnZvdGVzXG4gICk7XG5cbmFwcC5nZXQoXG4gICcvYXBpL3YxL29mZmljZS86b2ZmaWNlaWQvcmVzdWx0JywgXG4gIHRva2VuLnZlcmlmeVRva2VuLCBcbiAgT2ZmaWNlLm9mZmljZVJlc3VsdFxuICApO1xuXG4gIGFwcC5nZXQoXG4gICAgJy9hcGkvdjEvY2FuZGlkYXRlcycsIFxuICAgIHRva2VuLnZlcmlmeVRva2VuLCBcbiAgICBjYW5kaWRhdGVDdHIuZ2V0QWxsQ2FuZGlkYXRlc1xuICAgICk7XG5cbi8vIHVzZXIgbG9naW5cbmFwcC5wb3N0KFxuICAnL2FwaS92MS9hdXRoL3NpZ251cCcsIFxuICB1c2VyQ3RyLmNyZWF0ZVVzZXJcbiAgKTtcblxuYXBwLnBvc3QoXG4gICcvYXBpL3YxL2F1dGgvbG9naW4nLCBcbiAgdXNlckN0ci5sb2dpblxuICApO1xuXG4gIC8vIHVzZXIvYWRtaW4gbG9nb3V0XG4gIGFwcC5wb3N0KFxuICAgICcvYXBpL3YxL2F1dGgvc2lnbm91dCcsXG4gICAgdG9rZW4udmVyaWZ5VG9rZW4sXG4gICAgdXNlckN0ci5zaWdub3V0XG4gIClcblxuYXBwLmdldCgnLycsIChyZXEsIHJlcykgPT4gcmVzLnN0YXR1cygyMDApLnNlbmQoe1xuICBcInN0YXR1c1wiOiAyMDAsXG4gIFwibWVzc2FnZVwiOiAnV2VsY29tZSB0byBQT0xJVElDTydcbn0pKTtcblxuLy8gSGFuZGxlIDQwNDogc2VuZCBhbiA0MDQgZXJyb3IgcGFnZVxuLy8gYXBwLnVzZShmdW5jdGlvbihyZXEsIHJlcykge1xuLy8gICByZXMuc3RhdHVzKDQwNCkuc2VuZEZpbGUocGF0aC5qb2luKF9fZGlybmFtZSArICcuLi8uLi9VSS92aWV3cy80MDQuaHRtbCcpKTtcbi8vIH0pO1xuXG4vLyBIYW5kbGUgNTAwOiBzZW5kIGEgNTAwIGVycm9yXG4vLyBhcHAudXNlKGZ1bmN0aW9uKGVycm9yLCByZXEsIHJlcywgbmV4dCkge1xuLy8gICByZXMuc3RhdHVzKDUwMCkuc2VuZEZpbGUocGF0aC5qb2luKF9fZGlybmFtZSArICcuLi8uLi9VSS92aWV3cy81MDAuaHRtbCcpKTtcbi8vIH0pO1xuXG5hcHAuYWxsKCcqJywgKHJlcSwgcmVzKSA9PntcbiAgcmVzLnN0YXR1cyg0MDQpLnNlbmQoe1xuICAgIFwic3RhdHVzXCI6IDQwNCxcbiAgICBcImVycm9yXCI6IFwiUmVzb3VyY2Ugbm90IGZvdW5kIG9uIHRoZSBzZXJ2ZXJcIiBcbiAgfSlcbn0pXG5cbmFwcC5saXN0ZW4ocG9ydCwgKCkgPT4ge1xuICBjb25zb2xlLmxvZyhgYXBwIGlzIHJ1bm5pbmcgb24gcG9ydCAke3BvcnR9YCk7XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgYXBwOyJdfQ==