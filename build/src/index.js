'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _express = require('express');

var _express2 = _interopRequireDefault(_express);

var _cors = require('cors');

var _cors2 = _interopRequireDefault(_cors);

var _path = require('path');

var _path2 = _interopRequireDefault(_path);

var _bodyParser = require('body-parser');

var _bodyParser2 = _interopRequireDefault(_bodyParser);

var _officeCtr = require('./controllers/officeCtr');

var _officeCtr2 = _interopRequireDefault(_officeCtr);

var _userCtr = require('./controllers/userCtr');

var _userCtr2 = _interopRequireDefault(_userCtr);

var _partyCtr = require('./controllers/partyCtr');

var _partyCtr2 = _interopRequireDefault(_partyCtr);

var _candidatesCtr = require('./controllers/candidatesCtr');

var _candidatesCtr2 = _interopRequireDefault(_candidatesCtr);

var _interestCtr = require('./controllers/interestCtr');

var _interestCtr2 = _interopRequireDefault(_interestCtr);

var _votesCtr = require('./controllers/votesCtr');

var _votesCtr2 = _interopRequireDefault(_votesCtr);

var _tokenAuth = require('./helper/tokenAuth');

var _tokenAuth2 = _interopRequireDefault(_tokenAuth);

var _verifyAdmin = require('./helper/verifyAdmin');

var _verifyAdmin2 = _interopRequireDefault(_verifyAdmin);

var _userAuth = require('./helper/userAuth');

var _userAuth2 = _interopRequireDefault(_userAuth);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var app = (0, _express2.default)(); // import { json, urlencoded } from 'body-parser';


app.use((0, _cors2.default)());

app.use('*', function (req, res, next) {
  res.header('Access-Control-Allow-Origin', '*');
  res.header('Access-Control-Allow-Methods', 'PUT, GET, POST, DELETE, OPTIONS');
  res.header('Access-Control-Allow-Headers', 'Content-Type');
  next();
});

app.use(_express2.default.static(_path2.default.join(__dirname)));
app.use('/styles', _express2.default.static(__dirname + '../../UI/styles'));
app.use('/images', _express2.default.static(__dirname + '../../UI/images'));
app.use('/scripts', _express2.default.static(__dirname + '../../UI/scripts'));
app.use('/views', _express2.default.static(__dirname + '../../UI/views'));

app.use(_bodyParser2.default.json());
app.use(_bodyParser2.default.urlencoded({
  extended: true
}));

app.use(_express2.default.json());
var port = process.env.PORT || 5000;

// homepage
app.get('/', function (req, res) {
  res.sendFile(_path2.default.join(__dirname + '../../UI/views/index.html'));
});

app.get('/api/v1', function (req, res) {
  return res.status(200).send({
    status: 200,
    message: 'Welcome to POLITICO'
  });
});
// admin: create, edit
app.post('/api/v1/parties', _tokenAuth2.default.verifyToken, _verifyAdmin2.default.verifyIsAdmin, _partyCtr2.default.create);

app.patch('/api/v1/parties/:id/name', _tokenAuth2.default.verifyToken, _verifyAdmin2.default.verifyIsAdmin, _partyCtr2.default.update);

app.delete('/api/v1/parties/:id', _tokenAuth2.default.verifyToken, _verifyAdmin2.default.verifyIsAdmin, _partyCtr2.default.delete);

app.delete('/api/v1/offices/:id', _tokenAuth2.default.verifyToken, _verifyAdmin2.default.verifyIsAdmin, _officeCtr2.default.delete);

app.delete('/api/v1/interest/:id', _tokenAuth2.default.verifyToken, _verifyAdmin2.default.verifyIsAdmin, _interestCtr2.default.delete);

app.post('/api/v1/offices', _tokenAuth2.default.verifyToken, _verifyAdmin2.default.verifyIsAdmin, _officeCtr2.default.create);

app.post('/api/v1/office/:userid/register', _tokenAuth2.default.verifyToken, _verifyAdmin2.default.verifyIsAdmin, _userAuth2.default.validateUserId, _candidatesCtr2.default.register);

app.post('/api/v1/office/interest', _tokenAuth2.default.verifyToken, _interestCtr2.default.userInterest);

app.get('/api/v1/office/interest', _tokenAuth2.default.verifyToken, _verifyAdmin2.default.verifyIsAdmin, _interestCtr2.default.getAllInterestedCandidates);

app.get('/api/v1/users', _tokenAuth2.default.verifyToken, _verifyAdmin2.default.verifyIsAdmin, _userAuth2.default.validateUserId, _userCtr2.default.getAllUsers);

app.get('/api/v1/:id/users', _tokenAuth2.default.verifyToken, _verifyAdmin2.default.verifyIsAdmin, _userAuth2.default.validateUserId, _userCtr2.default.getAUser);

// user
app.get('/api/v1/parties', _partyCtr2.default.getParties);

app.get('/api/v1/parties/:id', _partyCtr2.default.getAParty);

app.get('/api/v1/offices', _tokenAuth2.default.verifyToken, _officeCtr2.default.getAllOffices);

app.get('/api/v1/offices/:id', _tokenAuth2.default.verifyToken, _officeCtr2.default.getOneOffice);

app.post('/api/v1/votes', _tokenAuth2.default.verifyToken, _votesCtr2.default.votes);

app.get('/api/v1/office/:officeid/result', _tokenAuth2.default.verifyToken, _officeCtr2.default.officeResult);

app.get('/api/v1/candidates', _tokenAuth2.default.verifyToken, _candidatesCtr2.default.getAllCandidates);

// user login
app.post('/api/v1/auth/signup', _userCtr2.default.createUser);

app.post('/api/v1/auth/login', _userCtr2.default.login);

// user/admin logout
app.post('/api/v1/auth/signout', _tokenAuth2.default.verifyToken, _userCtr2.default.signout);

app.get('/', function (req, res) {
  return res.status(200).send({
    status: 200,
    message: 'Welcome to POLITICO'
  });
});

// Handle 404: send an 404 error page
// app.use(function(req, res) {
//   res.status(404).sendFile(path.join(__dirname + '../../UI/views/404.html'));
// });

// Handle 500: send a 500 error
// app.use(function(error, req, res, next) {
//   res.status(500).sendFile(path.join(__dirname + '../../UI/views/500.html'));
// });

app.all('*', function (req, res) {
  res.status(404).send({
    status: 404,
    error: 'Resource not found on the server'
  });
});

app.listen(port, function () {
  console.log('app is running on port ' + port);
});

exports.default = app;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9pbmRleC5qcyJdLCJuYW1lcyI6WyJhcHAiLCJ1c2UiLCJyZXEiLCJyZXMiLCJuZXh0IiwiaGVhZGVyIiwiZXhwcmVzcyIsInN0YXRpYyIsInBhdGgiLCJqb2luIiwiX19kaXJuYW1lIiwiYm9keVBhcnNlciIsImpzb24iLCJ1cmxlbmNvZGVkIiwiZXh0ZW5kZWQiLCJwb3J0IiwicHJvY2VzcyIsImVudiIsIlBPUlQiLCJnZXQiLCJzZW5kRmlsZSIsInN0YXR1cyIsInNlbmQiLCJtZXNzYWdlIiwicG9zdCIsInRva2VuIiwidmVyaWZ5VG9rZW4iLCJ2ZXJpZnlBZG1pbiIsInZlcmlmeUlzQWRtaW4iLCJwYXJ0eUN0ciIsImNyZWF0ZSIsInBhdGNoIiwidXBkYXRlIiwiZGVsZXRlIiwiT2ZmaWNlIiwiaW50ZXJlc3RDdHIiLCJ2ZXJpZnlJZCIsInZhbGlkYXRlVXNlcklkIiwiY2FuZGlkYXRlQ3RyIiwicmVnaXN0ZXIiLCJ1c2VySW50ZXJlc3QiLCJnZXRBbGxJbnRlcmVzdGVkQ2FuZGlkYXRlcyIsInVzZXJDdHIiLCJnZXRBbGxVc2VycyIsImdldEFVc2VyIiwiZ2V0UGFydGllcyIsImdldEFQYXJ0eSIsImdldEFsbE9mZmljZXMiLCJnZXRPbmVPZmZpY2UiLCJ2b3Rlc0N0ciIsInZvdGVzIiwib2ZmaWNlUmVzdWx0IiwiZ2V0QWxsQ2FuZGlkYXRlcyIsImNyZWF0ZVVzZXIiLCJsb2dpbiIsInNpZ25vdXQiLCJhbGwiLCJlcnJvciIsImxpc3RlbiIsImNvbnNvbGUiLCJsb2ciXSwibWFwcGluZ3MiOiI7Ozs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7Ozs7QUFHQSxJQUFNQSxNQUFNLHdCQUFaLEMsQ0FoQkE7OztBQW1CQUEsSUFBSUMsR0FBSixDQUFRLHFCQUFSOztBQUVBRCxJQUFJQyxHQUFK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SWtCLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQjtBQUM5Q0QsWUFBUSxHQURzQztBQUU5Q0UsYUFBUztBQUZxQyxHQUFyQixDQUFkO0FBQUEsQ0FBYjs7QUFLQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQXZCLElBQUl3RCxHQUFKLENBQVEsR0FBUixFQUFhLFVBQUN0RCxHQUFELEVBQU1DLEdBQU4sRUFBYztBQUN6QkEsTUFBSWtCLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQjtBQUNuQkQsWUFBUSxHQURXO0FBRW5Cb0MsV0FBTztBQUZZLEdBQXJCO0FBSUQsQ0FMRDs7QUFPQXpELElBQUkwRCxNQUFKLENBQVczQyxJQUFYLEVBQWlCLFlBQU07QUFDckI0QyxVQUFRQyxHQUFSLDZCQUFzQzdDLElBQXRDO0FBQ0QsQ0FGRDs7a0JBSWVmLEciLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBpbXBvcnQgeyBqc29uLCB1cmxlbmNvZGVkIH0gZnJvbSAnYm9keS1wYXJzZXInO1xuaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgY29ycyBmcm9tICdjb3JzJztcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IGJvZHlQYXJzZXIgZnJvbSAnYm9keS1wYXJzZXInO1xuaW1wb3J0IE9mZmljZSBmcm9tICcuL2NvbnRyb2xsZXJzL29mZmljZUN0cic7XG5pbXBvcnQgdXNlckN0ciBmcm9tICcuL2NvbnRyb2xsZXJzL3VzZXJDdHInO1xuaW1wb3J0IHBhcnR5Q3RyIGZyb20gJy4vY29udHJvbGxlcnMvcGFydHlDdHInO1xuaW1wb3J0IGNhbmRpZGF0ZUN0ciBmcm9tICcuL2NvbnRyb2xsZXJzL2NhbmRpZGF0ZXNDdHInO1xuaW1wb3J0IGludGVyZXN0Q3RyIGZyb20gJy4vY29udHJvbGxlcnMvaW50ZXJlc3RDdHInO1xuaW1wb3J0IHZvdGVzQ3RyIGZyb20gJy4vY29udHJvbGxlcnMvdm90ZXNDdHInO1xuaW1wb3J0IHRva2VuIGZyb20gJy4vaGVscGVyL3Rva2VuQXV0aCc7XG5pbXBvcnQgdmVyaWZ5QWRtaW4gZnJvbSAnLi9oZWxwZXIvdmVyaWZ5QWRtaW4nO1xuaW1wb3J0IHZlcmlmeUlkIGZyb20gJy4vaGVscGVyL3VzZXJBdXRoJztcblxuXG5jb25zdCBhcHAgPSBleHByZXNzKCk7XG5cblxuYXBwLnVzZShjb3JzKCkpO1xuXG5hcHAudXNlKCcqJywgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbicsICcqJyk7XG4gIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU1ldGhvZHMnLCAnUFVULCBHRVQsIFBPU1QsIERFTEVURSwgT1BUSU9OUycpO1xuICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJywgJ0NvbnRlbnQtVHlwZScpO1xuICBuZXh0KCk7XG59KTtcblxuYXBwLnVzZShleHByZXNzLnN0YXRpYyhwYXRoLmpvaW4oX19kaXJuYW1lKSkpO1xuYXBwLnVzZSgnL3N0eWxlcycsIGV4cHJlc3Muc3RhdGljKGAke19fZGlybmFtZX0uLi8uLi9VSS9zdHlsZXNgKSk7XG5hcHAudXNlKCcvaW1hZ2VzJywgZXhwcmVzcy5zdGF0aWMoYCR7X19kaXJuYW1lfS4uLy4uL1VJL2ltYWdlc2ApKTtcbmFwcC51c2UoJy9zY3JpcHRzJywgZXhwcmVzcy5zdGF0aWMoYCR7X19kaXJuYW1lfS4uLy4uL1VJL3NjcmlwdHNgKSk7XG5hcHAudXNlKCcvdmlld3MnLCBleHByZXNzLnN0YXRpYyhgJHtfX2Rpcm5hbWV9Li4vLi4vVUkvdmlld3NgKSk7XG5cblxuYXBwLnVzZShib2R5UGFyc2VyLmpzb24oKSk7XG5hcHAudXNlKGJvZHlQYXJzZXIudXJsZW5jb2RlZCh7XG4gIGV4dGVuZGVkOiB0cnVlLFxufSkpO1xuXG5hcHAudXNlKGV4cHJlc3MuanNvbigpKTtcbmNvbnN0IHBvcnQgPSBwcm9jZXNzLmVudi5QT1JUIHx8IDUwMDA7XG5cbi8vIGhvbWVwYWdlXG5hcHAuZ2V0KCcvJywgKHJlcSwgcmVzKSA9PiB7XG4gIHJlcy5zZW5kRmlsZShwYXRoLmpvaW4oYCR7X19kaXJuYW1lfS4uLy4uL1VJL3ZpZXdzL2luZGV4Lmh0bWxgKSk7XG59KTtcblxuYXBwLmdldCgnL2FwaS92MScsIChyZXEsIHJlcykgPT4gcmVzLnN0YXR1cygyMDApLnNlbmQoe1xuICBzdGF0dXM6IDIwMCxcbiAgbWVzc2FnZTogJ1dlbGNvbWUgdG8gUE9MSVRJQ08nLFxufSkpO1xuLy8gYWRtaW46IGNyZWF0ZSwgZWRpdFxuYXBwLnBvc3QoXG4gICcvYXBpL3YxL3BhcnRpZXMnLFxuICB0b2tlbi52ZXJpZnlUb2tlbixcbiAgdmVyaWZ5QWRtaW4udmVyaWZ5SXNBZG1pbixcbiAgcGFydHlDdHIuY3JlYXRlLFxuKTtcblxuYXBwLnBhdGNoKFxuICAnL2FwaS92MS9wYXJ0aWVzLzppZC9uYW1lJyxcbiAgdG9rZW4udmVyaWZ5VG9rZW4sXG4gIHZlcmlmeUFkbWluLnZlcmlmeUlzQWRtaW4sXG4gIHBhcnR5Q3RyLnVwZGF0ZSxcbik7XG5cbmFwcC5kZWxldGUoXG4gICcvYXBpL3YxL3BhcnRpZXMvOmlkJyxcbiAgdG9rZW4udmVyaWZ5VG9rZW4sXG4gIHZlcmlmeUFkbWluLnZlcmlmeUlzQWRtaW4sXG4gIHBhcnR5Q3RyLmRlbGV0ZSxcbik7XG5cbmFwcC5kZWxldGUoXG4gICcvYXBpL3YxL29mZmljZXMvOmlkJyxcbiAgdG9rZW4udmVyaWZ5VG9rZW4sXG4gIHZlcmlmeUFkbWluLnZlcmlmeUlzQWRtaW4sXG4gIE9mZmljZS5kZWxldGUsXG4pO1xuXG5hcHAuZGVsZXRlKFxuICAnL2FwaS92MS9pbnRlcmVzdC86aWQnLFxuICB0b2tlbi52ZXJpZnlUb2tlbixcbiAgdmVyaWZ5QWRtaW4udmVyaWZ5SXNBZG1pbixcbiAgaW50ZXJlc3RDdHIuZGVsZXRlLFxuKTtcblxuYXBwLnBvc3QoXG4gICcvYXBpL3YxL29mZmljZXMnLFxuICB0b2tlbi52ZXJpZnlUb2tlbixcbiAgdmVyaWZ5QWRtaW4udmVyaWZ5SXNBZG1pbixcbiAgT2ZmaWNlLmNyZWF0ZSxcbik7XG5cbmFwcC5wb3N0KFxuICAnL2FwaS92MS9vZmZpY2UvOnVzZXJpZC9yZWdpc3RlcicsXG4gIHRva2VuLnZlcmlmeVRva2VuLFxuICB2ZXJpZnlBZG1pbi52ZXJpZnlJc0FkbWluLFxuICB2ZXJpZnlJZC52YWxpZGF0ZVVzZXJJZCxcbiAgY2FuZGlkYXRlQ3RyLnJlZ2lzdGVyLFxuKTtcblxuYXBwLnBvc3QoXG4gICcvYXBpL3YxL29mZmljZS9pbnRlcmVzdCcsXG4gIHRva2VuLnZlcmlmeVRva2VuLFxuICBpbnRlcmVzdEN0ci51c2VySW50ZXJlc3QsXG4pO1xuXG5hcHAuZ2V0KFxuICAnL2FwaS92MS9vZmZpY2UvaW50ZXJlc3QnLFxuICB0b2tlbi52ZXJpZnlUb2tlbixcbiAgdmVyaWZ5QWRtaW4udmVyaWZ5SXNBZG1pbixcbiAgaW50ZXJlc3RDdHIuZ2V0QWxsSW50ZXJlc3RlZENhbmRpZGF0ZXMsXG4pO1xuXG5hcHAuZ2V0KFxuICAnL2FwaS92MS91c2VycycsXG4gIHRva2VuLnZlcmlmeVRva2VuLFxuICB2ZXJpZnlBZG1pbi52ZXJpZnlJc0FkbWluLFxuICB2ZXJpZnlJZC52YWxpZGF0ZVVzZXJJZCxcbiAgdXNlckN0ci5nZXRBbGxVc2Vycyxcbik7XG5cbmFwcC5nZXQoXG4gICcvYXBpL3YxLzppZC91c2VycycsXG4gIHRva2VuLnZlcmlmeVRva2VuLFxuICB2ZXJpZnlBZG1pbi52ZXJpZnlJc0FkbWluLFxuICB2ZXJpZnlJZC52YWxpZGF0ZVVzZXJJZCxcbiAgdXNlckN0ci5nZXRBVXNlcixcbik7XG5cblxuLy8gdXNlclxuYXBwLmdldChcbiAgJy9hcGkvdjEvcGFydGllcycsXG4gIHBhcnR5Q3RyLmdldFBhcnRpZXMsXG4pO1xuXG5hcHAuZ2V0KFxuICAnL2FwaS92MS9wYXJ0aWVzLzppZCcsXG4gIHBhcnR5Q3RyLmdldEFQYXJ0eSxcbik7XG5cbmFwcC5nZXQoXG4gICcvYXBpL3YxL29mZmljZXMnLFxuICB0b2tlbi52ZXJpZnlUb2tlbixcbiAgT2ZmaWNlLmdldEFsbE9mZmljZXMsXG4pO1xuXG5hcHAuZ2V0KFxuICAnL2FwaS92MS9vZmZpY2VzLzppZCcsXG4gIHRva2VuLnZlcmlmeVRva2VuLFxuICBPZmZpY2UuZ2V0T25lT2ZmaWNlLFxuKTtcblxuYXBwLnBvc3QoXG4gICcvYXBpL3YxL3ZvdGVzJyxcbiAgdG9rZW4udmVyaWZ5VG9rZW4sXG4gIHZvdGVzQ3RyLnZvdGVzLFxuKTtcblxuYXBwLmdldChcbiAgJy9hcGkvdjEvb2ZmaWNlLzpvZmZpY2VpZC9yZXN1bHQnLFxuICB0b2tlbi52ZXJpZnlUb2tlbixcbiAgT2ZmaWNlLm9mZmljZVJlc3VsdCxcbik7XG5cbmFwcC5nZXQoXG4gICcvYXBpL3YxL2NhbmRpZGF0ZXMnLFxuICB0b2tlbi52ZXJpZnlUb2tlbixcbiAgY2FuZGlkYXRlQ3RyLmdldEFsbENhbmRpZGF0ZXMsXG4pO1xuXG4vLyB1c2VyIGxvZ2luXG5hcHAucG9zdChcbiAgJy9hcGkvdjEvYXV0aC9zaWdudXAnLFxuICB1c2VyQ3RyLmNyZWF0ZVVzZXIsXG4pO1xuXG5hcHAucG9zdChcbiAgJy9hcGkvdjEvYXV0aC9sb2dpbicsXG4gIHVzZXJDdHIubG9naW4sXG4pO1xuXG4vLyB1c2VyL2FkbWluIGxvZ291dFxuYXBwLnBvc3QoXG4gICcvYXBpL3YxL2F1dGgvc2lnbm91dCcsXG4gIHRva2VuLnZlcmlmeVRva2VuLFxuICB1c2VyQ3RyLnNpZ25vdXQsXG4pO1xuXG5hcHAuZ2V0KCcvJywgKHJlcSwgcmVzKSA9PiByZXMuc3RhdHVzKDIwMCkuc2VuZCh7XG4gIHN0YXR1czogMjAwLFxuICBtZXNzYWdlOiAnV2VsY29tZSB0byBQT0xJVElDTycsXG59KSk7XG5cbi8vIEhhbmRsZSA0MDQ6IHNlbmQgYW4gNDA0IGVycm9yIHBhZ2Vcbi8vIGFwcC51c2UoZnVuY3Rpb24ocmVxLCByZXMpIHtcbi8vICAgcmVzLnN0YXR1cyg0MDQpLnNlbmRGaWxlKHBhdGguam9pbihfX2Rpcm5hbWUgKyAnLi4vLi4vVUkvdmlld3MvNDA0Lmh0bWwnKSk7XG4vLyB9KTtcblxuLy8gSGFuZGxlIDUwMDogc2VuZCBhIDUwMCBlcnJvclxuLy8gYXBwLnVzZShmdW5jdGlvbihlcnJvciwgcmVxLCByZXMsIG5leHQpIHtcbi8vICAgcmVzLnN0YXR1cyg1MDApLnNlbmRGaWxlKHBhdGguam9pbihfX2Rpcm5hbWUgKyAnLi4vLi4vVUkvdmlld3MvNTAwLmh0bWwnKSk7XG4vLyB9KTtcblxuYXBwLmFsbCgnKicsIChyZXEsIHJlcykgPT4ge1xuICByZXMuc3RhdHVzKDQwNCkuc2VuZCh7XG4gICAgc3RhdHVzOiA0MDQsXG4gICAgZXJyb3I6ICdSZXNvdXJjZSBub3QgZm91bmQgb24gdGhlIHNlcnZlcicsXG4gIH0pO1xufSk7XG5cbmFwcC5saXN0ZW4ocG9ydCwgKCkgPT4ge1xuICBjb25zb2xlLmxvZyhgYXBwIGlzIHJ1bm5pbmcgb24gcG9ydCAke3BvcnR9YCk7XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgYXBwO1xuIl19