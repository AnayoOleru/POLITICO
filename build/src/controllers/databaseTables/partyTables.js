'use strict';

var _require = require('pg'),
    Pool = _require.Pool;

var dotenv = require('dotenv');

dotenv.config();

var pool = new Pool({
  connectionString: process.env.DATABASE_URL
});

pool.on('connect', function () {
  console.log('database is connected now');
});

/**
 * Create user Tables
 */
var createPartyTables = function createPartyTables() {
  var queryText = 'CREATE TABLE IF NOT EXISTS\n      party(\n        id UUID PRIMARY KEY NOT NULL,\n        name VARCHAR(128) NOT NULL,\n        hqaddress VARCHAR(128) NOT NULL,\n        logoUrl VARCHAR(128) NOT NULL,\n        created_date TIMESTAMP\n      )';

  pool.query(queryText).then(function (res) {
    console.log(res);
    pool.end();
  }).catch(function (err) {
    console.log(err);
    pool.end();
  });
};

/**
 * Drop Tables
 */
var dropPartyTables = function dropPartyTables() {
  var queryText = 'DROP TABLE IF EXISTS party';
  pool.query(queryText).then(function (res) {
    console.log(res);
    pool.end();
  }).catch(function (err) {
    console.log(err);
    pool.end();
  });
};

pool.on('remove', function () {
  console.log('Table rcreation exited');
  process.exit(0);
});

module.exports = {
  createPartyTables: createPartyTables,
  dropPartyTables: dropPartyTables
};

require('make-runnable');
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9jb250cm9sbGVycy9kYXRhYmFzZVRhYmxlcy9wYXJ0eVRhYmxlcy5qcyJdLCJuYW1lcyI6WyJyZXF1aXJlIiwiUG9vbCIsImRvdGVudiIsImNvbmZpZyIsInBvb2wiLCJjb25uZWN0aW9uU3RyaW5nIiwicHJvY2VzcyIsImVudiIsIkRBVEFCQVNFX1VSTCIsIm9uIiwiY29uc29sZSIsImxvZyIsImNyZWF0ZVBhcnR5VGFibGVzIiwicXVlcnlUZXh0IiwicXVlcnkiLCJ0aGVuIiwicmVzIiwiZW5kIiwiY2F0Y2giLCJlcnIiLCJkcm9wUGFydHlUYWJsZXMiLCJleGl0IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ijs7ZUFBaUJBLFFBQVEsSUFBUixDO0lBQVRDLEksWUFBQUEsSTs7QUFDUixJQUFNQyxTQUFTRixRQUFRLFFBQVIsQ0FBZjs7QUFFQUUsT0FBT0MsTUFBUDs7QUFFQSxJQUFNQyxPQUFPLElBQUlILElBQUosQ0FBUztBQUNwQkksb0JBQWtCQyxRQUFRQyxHQUFSLENBQVlDO0FBRFYsQ0FBVCxDQUFiOztBQUlBSixLQUFLSyxFQUFMLENBQVEsU0FBUixFQUFtQixZQUFNO0FBQ3ZCQyxVQUFRQyxHQUFSLENBQVksMkJBQVo7QUFDRCxDQUZEOztBQUlBOzs7QUFHQSxJQUFNQyxvQkFBb0IsU0FBcEJBLGlCQUFvQixHQUFNO0FBQzlCLE1BQU1DLDZQQUFOOztBQVVBVCxPQUFLVSxLQUFMLENBQVdELFNBQVgsRUFDR0UsSUFESCxDQUNRLFVBQUNDLEdBQUQsRUFBUztBQUNiTixZQUFRQyxHQUFSLENBQVlLLEdBQVo7QUFDQVosU0FBS2EsR0FBTDtBQUNELEdBSkgsRUFLR0MsS0FMSCxDQUtTLFVBQUNDLEdBQUQsRUFBUztBQUNkVCxZQUFRQyxHQUFSLENBQVlRLEdBQVo7QUFDQWYsU0FBS2EsR0FBTDtBQUNELEdBUkg7QUFTRCxDQXBCRDs7QUFzQkE7OztBQUdBLElBQU1HLGtCQUFrQixTQUFsQkEsZUFBa0IsR0FBTTtBQUM1QixNQUFNUCxZQUFZLDRCQUFsQjtBQUNBVCxPQUFLVSxLQUFMLENBQVdELFNBQVgsRUFDR0UsSUFESCxDQUNRLFVBQUNDLEdBQUQsRUFBUztBQUNiTixZQUFRQyxHQUFSLENBQVlLLEdBQVo7QUFDQVosU0FBS2EsR0FBTDtBQUNELEdBSkgsRUFLR0MsS0FMSCxDQUtTLFVBQUNDLEdBQUQsRUFBUztBQUNkVCxZQUFRQyxHQUFSLENBQVlRLEdBQVo7QUFDQWYsU0FBS2EsR0FBTDtBQUNELEdBUkg7QUFTRCxDQVhEOztBQWFBYixLQUFLSyxFQUFMLENBQVEsUUFBUixFQUFrQixZQUFNO0FBQ3RCQyxVQUFRQyxHQUFSLENBQVksd0JBQVo7QUFDQUwsVUFBUWUsSUFBUixDQUFhLENBQWI7QUFDRCxDQUhEOztBQUtBQyxPQUFPQyxPQUFQLEdBQWlCO0FBQ2ZYLHNDQURlO0FBRWZRO0FBRmUsQ0FBakI7O0FBS0FwQixRQUFRLGVBQVIiLCJmaWxlIjoicGFydHlUYWJsZXMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7IFBvb2wgfSA9IHJlcXVpcmUoJ3BnJyk7XG5jb25zdCBkb3RlbnYgPSByZXF1aXJlKCdkb3RlbnYnKTtcblxuZG90ZW52LmNvbmZpZygpO1xuXG5jb25zdCBwb29sID0gbmV3IFBvb2woe1xuICBjb25uZWN0aW9uU3RyaW5nOiBwcm9jZXNzLmVudi5EQVRBQkFTRV9VUkxcbn0pO1xuXG5wb29sLm9uKCdjb25uZWN0JywgKCkgPT4ge1xuICBjb25zb2xlLmxvZygnZGF0YWJhc2UgaXMgY29ubmVjdGVkIG5vdycpO1xufSk7XG5cbi8qKlxuICogQ3JlYXRlIHVzZXIgVGFibGVzXG4gKi9cbmNvbnN0IGNyZWF0ZVBhcnR5VGFibGVzID0gKCkgPT4ge1xuICBjb25zdCBxdWVyeVRleHQgPVxuICAgIGBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUU1xuICAgICAgcGFydHkoXG4gICAgICAgIGlkIFVVSUQgUFJJTUFSWSBLRVkgTk9UIE5VTEwsXG4gICAgICAgIG5hbWUgVkFSQ0hBUigxMjgpIE5PVCBOVUxMLFxuICAgICAgICBocWFkZHJlc3MgVkFSQ0hBUigxMjgpIE5PVCBOVUxMLFxuICAgICAgICBsb2dvVXJsIFZBUkNIQVIoMTI4KSBOT1QgTlVMTCxcbiAgICAgICAgY3JlYXRlZF9kYXRlIFRJTUVTVEFNUFxuICAgICAgKWA7XG5cbiAgcG9vbC5xdWVyeShxdWVyeVRleHQpXG4gICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgY29uc29sZS5sb2cocmVzKTtcbiAgICAgIHBvb2wuZW5kKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIHBvb2wuZW5kKCk7XG4gICAgfSk7XG59XG5cbi8qKlxuICogRHJvcCBUYWJsZXNcbiAqL1xuY29uc3QgZHJvcFBhcnR5VGFibGVzID0gKCkgPT4ge1xuICBjb25zdCBxdWVyeVRleHQgPSAnRFJPUCBUQUJMRSBJRiBFWElTVFMgcGFydHknO1xuICBwb29sLnF1ZXJ5KHF1ZXJ5VGV4dClcbiAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhyZXMpO1xuICAgICAgcG9vbC5lbmQoKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgcG9vbC5lbmQoKTtcbiAgICB9KTtcbn1cblxucG9vbC5vbigncmVtb3ZlJywgKCkgPT4ge1xuICBjb25zb2xlLmxvZygnVGFibGUgcmNyZWF0aW9uIGV4aXRlZCcpO1xuICBwcm9jZXNzLmV4aXQoMCk7XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGNyZWF0ZVBhcnR5VGFibGVzLFxuICBkcm9wUGFydHlUYWJsZXNcbn07XG5cbnJlcXVpcmUoJ21ha2UtcnVubmFibGUnKTsiXX0=