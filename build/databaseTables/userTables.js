'use strict';

var _require = require('pg'),
    Pool = _require.Pool;

var dotenv = require('dotenv');

dotenv.config();

var pool = new Pool({
  connectionString: process.env.DATABASE_URL
});

pool.on('connect', function () {
  console.log('database is connected now');
});

/**
 * Create user Tables
 */
var createUserTables = function createUserTables() {
  var queryText = 'CREATE TABLE IF NOT EXISTS\n      users(\n        id UUID PRIMARY KEY NOT NULL,\n        firstname VARCHAR(128) NOT NULL,\n        lastname VARCHAR(128) NOT NULL,\n        othername VARCHAR(128) NOT NULL,\n        email VARCHAR(128) UNIQUE NOT NULL,\n        phonenumber VARCHAR(128) NOT NULL,\n        passportUrl VARCHAR(128) NOT NULL,\n        password VARCHAR(120) NOT NULL,\n        isAdmin BOOLEAN DEFAULT false,\n        created_date TIMESTAMP\n      )';

  pool.query(queryText).then(function (res) {
    console.log(res);
    pool.end();
  }).catch(function (err) {
    console.log(err);
    pool.end();
  });
};

/**
 * Drop Tables
 */
var dropUserTables = function dropUserTables() {
  var queryText = 'DROP TABLE IF EXISTS users';
  pool.query(queryText).then(function (res) {
    console.log(res);
    pool.end();
  }).catch(function (err) {
    console.log(err);
    pool.end();
  });
};

pool.on('remove', function () {
  console.log('Table rcreation exited');
  process.exit(0);
});

module.exports = {
  createUserTables: createUserTables,
  dropUserTables: dropUserTables
};

require('make-runnable');
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2RhdGFiYXNlVGFibGVzL3VzZXJUYWJsZXMuanMiXSwibmFtZXMiOlsicmVxdWlyZSIsIlBvb2wiLCJkb3RlbnYiLCJjb25maWciLCJwb29sIiwiY29ubmVjdGlvblN0cmluZyIsInByb2Nlc3MiLCJlbnYiLCJEQVRBQkFTRV9VUkwiLCJvbiIsImNvbnNvbGUiLCJsb2ciLCJjcmVhdGVVc2VyVGFibGVzIiwicXVlcnlUZXh0IiwicXVlcnkiLCJ0aGVuIiwicmVzIiwiZW5kIiwiY2F0Y2giLCJlcnIiLCJkcm9wVXNlclRhYmxlcyIsImV4aXQiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOztlQUFpQkEsUUFBUSxJQUFSLEM7SUFBVEMsSSxZQUFBQSxJOztBQUNSLElBQU1DLFNBQVNGLFFBQVEsUUFBUixDQUFmOztBQUVBRSxPQUFPQyxNQUFQOztBQUVBLElBQU1DLE9BQU8sSUFBSUgsSUFBSixDQUFTO0FBQ3BCSSxvQkFBa0JDLFFBQVFDLEdBQVIsQ0FBWUM7QUFEVixDQUFULENBQWI7O0FBSUFKLEtBQUtLLEVBQUwsQ0FBUSxTQUFSLEVBQW1CLFlBQU07QUFDdkJDLFVBQVFDLEdBQVIsQ0FBWSwyQkFBWjtBQUNELENBRkQ7O0FBSUE7OztBQUdBLElBQU1DLG1CQUFtQixTQUFuQkEsZ0JBQW1CLEdBQU07QUFDN0IsTUFBTUMseWRBQU47O0FBZUFULE9BQUtVLEtBQUwsQ0FBV0QsU0FBWCxFQUNHRSxJQURILENBQ1EsVUFBQ0MsR0FBRCxFQUFTO0FBQ2JOLFlBQVFDLEdBQVIsQ0FBWUssR0FBWjtBQUNBWixTQUFLYSxHQUFMO0FBQ0QsR0FKSCxFQUtHQyxLQUxILENBS1MsVUFBQ0MsR0FBRCxFQUFTO0FBQ2RULFlBQVFDLEdBQVIsQ0FBWVEsR0FBWjtBQUNBZixTQUFLYSxHQUFMO0FBQ0QsR0FSSDtBQVNELENBekJEOztBQTJCQTs7O0FBR0EsSUFBTUcsaUJBQWlCLFNBQWpCQSxjQUFpQixHQUFNO0FBQzNCLE1BQU1QLFlBQVksNEJBQWxCO0FBQ0FULE9BQUtVLEtBQUwsQ0FBV0QsU0FBWCxFQUNHRSxJQURILENBQ1EsVUFBQ0MsR0FBRCxFQUFTO0FBQ2JOLFlBQVFDLEdBQVIsQ0FBWUssR0FBWjtBQUNBWixTQUFLYSxHQUFMO0FBQ0QsR0FKSCxFQUtHQyxLQUxILENBS1MsVUFBQ0MsR0FBRCxFQUFTO0FBQ2RULFlBQVFDLEdBQVIsQ0FBWVEsR0FBWjtBQUNBZixTQUFLYSxHQUFMO0FBQ0QsR0FSSDtBQVNELENBWEQ7O0FBYUFiLEtBQUtLLEVBQUwsQ0FBUSxRQUFSLEVBQWtCLFlBQU07QUFDdEJDLFVBQVFDLEdBQVIsQ0FBWSx3QkFBWjtBQUNBTCxVQUFRZSxJQUFSLENBQWEsQ0FBYjtBQUNELENBSEQ7O0FBS0FDLE9BQU9DLE9BQVAsR0FBaUI7QUFDZlgsb0NBRGU7QUFFZlE7QUFGZSxDQUFqQjs7QUFLQXBCLFFBQVEsZUFBUiIsImZpbGUiOiJ1c2VyVGFibGVzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyBQb29sIH0gPSByZXF1aXJlKCdwZycpO1xyXG5jb25zdCBkb3RlbnYgPSByZXF1aXJlKCdkb3RlbnYnKTtcclxuXHJcbmRvdGVudi5jb25maWcoKTtcclxuXHJcbmNvbnN0IHBvb2wgPSBuZXcgUG9vbCh7XHJcbiAgY29ubmVjdGlvblN0cmluZzogcHJvY2Vzcy5lbnYuREFUQUJBU0VfVVJMXHJcbn0pO1xyXG5cclxucG9vbC5vbignY29ubmVjdCcsICgpID0+IHtcclxuICBjb25zb2xlLmxvZygnZGF0YWJhc2UgaXMgY29ubmVjdGVkIG5vdycpO1xyXG59KTtcclxuXHJcbi8qKlxyXG4gKiBDcmVhdGUgdXNlciBUYWJsZXNcclxuICovXHJcbmNvbnN0IGNyZWF0ZVVzZXJUYWJsZXMgPSAoKSA9PiB7XHJcbiAgY29uc3QgcXVlcnlUZXh0ID1cclxuICAgIGBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUU1xyXG4gICAgICB1c2VycyhcclxuICAgICAgICBpZCBVVUlEIFBSSU1BUlkgS0VZIE5PVCBOVUxMLFxyXG4gICAgICAgIGZpcnN0bmFtZSBWQVJDSEFSKDEyOCkgTk9UIE5VTEwsXHJcbiAgICAgICAgbGFzdG5hbWUgVkFSQ0hBUigxMjgpIE5PVCBOVUxMLFxyXG4gICAgICAgIG90aGVybmFtZSBWQVJDSEFSKDEyOCkgTk9UIE5VTEwsXHJcbiAgICAgICAgZW1haWwgVkFSQ0hBUigxMjgpIFVOSVFVRSBOT1QgTlVMTCxcclxuICAgICAgICBwaG9uZW51bWJlciBWQVJDSEFSKDEyOCkgTk9UIE5VTEwsXHJcbiAgICAgICAgcGFzc3BvcnRVcmwgVkFSQ0hBUigxMjgpIE5PVCBOVUxMLFxyXG4gICAgICAgIHBhc3N3b3JkIFZBUkNIQVIoMTIwKSBOT1QgTlVMTCxcclxuICAgICAgICBpc0FkbWluIEJPT0xFQU4gREVGQVVMVCBmYWxzZSxcclxuICAgICAgICBjcmVhdGVkX2RhdGUgVElNRVNUQU1QXHJcbiAgICAgIClgO1xyXG5cclxuICBwb29sLnF1ZXJ5KHF1ZXJ5VGV4dClcclxuICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgY29uc29sZS5sb2cocmVzKTtcclxuICAgICAgcG9vbC5lbmQoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICBwb29sLmVuZCgpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBEcm9wIFRhYmxlc1xyXG4gKi9cclxuY29uc3QgZHJvcFVzZXJUYWJsZXMgPSAoKSA9PiB7XHJcbiAgY29uc3QgcXVlcnlUZXh0ID0gJ0RST1AgVEFCTEUgSUYgRVhJU1RTIHVzZXJzJztcclxuICBwb29sLnF1ZXJ5KHF1ZXJ5VGV4dClcclxuICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgY29uc29sZS5sb2cocmVzKTtcclxuICAgICAgcG9vbC5lbmQoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICBwb29sLmVuZCgpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbnBvb2wub24oJ3JlbW92ZScsICgpID0+IHtcclxuICBjb25zb2xlLmxvZygnVGFibGUgcmNyZWF0aW9uIGV4aXRlZCcpO1xyXG4gIHByb2Nlc3MuZXhpdCgwKTtcclxufSk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICBjcmVhdGVVc2VyVGFibGVzLFxyXG4gIGRyb3BVc2VyVGFibGVzXHJcbn07XHJcblxyXG5yZXF1aXJlKCdtYWtlLXJ1bm5hYmxlJyk7Il19